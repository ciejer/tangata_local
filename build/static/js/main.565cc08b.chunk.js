(this.webpackJsonpsqlgui=this.webpackJsonpsqlgui||[]).push([[0],{140:function(e,t,n){},282:function(e,t,n){},604:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),s=n.n(r),c=(n(282),n(52)),i=n(53),l=n(57),d=n(56),u=n(272),h=(n(140),n(141),n(9)),j=n(15),p=n(168),b=n(617),m=n(610),f=n(7),O=n.n(f),x=n(8);function g(){return(g=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return(C=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/refresh_metadata",{method:"POST",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_user_config/",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(1);function N(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),o=n[0],r=n[1],s=Object(a.useState)(""),c=Object(h.a)(s,2),i=c[0],l=c[1],d=Object(a.useState)(""),u=Object(h.a)(d,2),f=u[0],O=u[1],x=Object(a.useState)(""),C=Object(h.a)(x,2),k=C[0],N=C[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("nav",{class:"navbar-dark bg-brand position-fixed w-100 z-100 navbar navbar-expand-xl navbar-light",children:Object(w.jsx)("div",{class:"navbar-brand",children:"T\u0100NGATA"})}),Object(w.jsxs)("div",{className:"Login",children:[Object(w.jsxs)(b.a,{defaultActiveKey:"login",id:"loginOrRegister",children:[Object(w.jsx)(m.a,{eventKey:"login",title:"Login",children:Object(w.jsxs)(j.a,{onSubmit:function(t){t.preventDefault(),function(e){return g.apply(this,arguments)}({user:{email:o,password:i}}).then((function(t){e.setUser(t),sessionStorage.setItem("user",JSON.stringify(t)),y(t.user),S(t.user).then((function(t){e.setUserConfig(t.user)}))}))},children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"loginEmail",children:[Object(w.jsx)(j.a.Label,{children:"Email"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"email",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"loginPassword",children:[Object(w.jsx)(j.a.Label,{children:"Password"}),Object(w.jsx)(j.a.Control,{type:"password",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(w.jsx)(p.a,{block:!0,size:"lg",type:"submit",disabled:!(o.length>0&&i.length>0),children:"Login"})]})}),Object(w.jsx)(m.a,{eventKey:"register",title:"Sign Up",children:Object(w.jsxs)(j.a,{onSubmit:function(t){t.preventDefault(),function(e){return v.apply(this,arguments)}({user:{email:o,password:i,config:{firstname:f,lastname:k}}}).then((function(t){e.setUser(t),sessionStorage.setItem("user",JSON.stringify(t)),y(t.user),S(t.user).then((function(t){e.setUserConfig(t.user)}))}))},children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"registerEmail",children:[Object(w.jsx)(j.a.Label,{children:"Email"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"email",value:o,onChange:function(e){return r(e.target.value)}})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"registerPassword",children:[Object(w.jsx)(j.a.Label,{children:"Password"}),Object(w.jsx)(j.a.Control,{type:"password",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"firstname",children:[Object(w.jsx)(j.a.Label,{children:"First Name"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",value:f,onChange:function(e){return O(e.target.value)}})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"lastname",children:[Object(w.jsx)(j.a.Label,{children:"Last Name"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",value:k,onChange:function(e){return N(e.target.value)}})]}),Object(w.jsx)(p.a,{block:!0,size:"lg",type:"submit",disabled:!(o.length>0&&i.length>0&&f.length>0),children:"Sign Up"})]})})]}),Object(w.jsxs)("div",{className:"container md-3 text-center col-md-5 mt-3",children:[Object(w.jsx)("blockquote",{children:Object(w.jsxs)("p",{children:["\u201cHutia te rito o te harakeke",Object(w.jsx)("br",{}),"Kei whea to k\u014dmako e k\u014d?",Object(w.jsx)("br",{}),"Ki mai ki ahau",Object(w.jsx)("br",{}),"He aha te mea nui o te Ao?",Object(w.jsx)("br",{}),"Maku e k\u012b atu,",Object(w.jsx)("br",{}),Object(w.jsx)("b",{children:"he t\u0101ngata, he t\u0101ngata, he t\u0101ngata"}),'..."']})}),Object(w.jsxs)("p",{children:["If the heart of the harakeke ",Object(w.jsx)("em",{children:"(flax plant)"})," was removed,",Object(w.jsx)("br",{}),"where would the bellbird sing?",Object(w.jsx)("br",{}),"If I was asked what was the most important thing in the world",Object(w.jsx)("br",{}),"I would be compelled to reply,",Object(w.jsx)("br",{}),"it is people, it is people, it is people.",Object(w.jsx)("br",{}),Object(w.jsx)("em",{children:"Ngaroto"})]}),Object(w.jsxs)("p",{children:["In te ao M\u0101ori (the M\u0101ori world view), T\u0101ngata (",Object(w.jsx)("em",{children:"TAHNG-uh-tuh"}),") describes something much larger than an addressed group of people: it describes ",Object(w.jsx)("em",{children:"whakapapa"}),", the surrounding network of ancestors and descendants we are connected to.",Object(w.jsx)("br",{}),"With this work we intend to follow these principles to put our people first: not just the data & analytics engineers, but those around our workplaces that know the deep details of how our businesses actually run.",Object(w.jsx)("br",{}),"These people are the lifeblood of what we do - and to keep moving forward, we need their context far more than ever."]})]})]})]})}var M=n(10),T=n(274),L=n.n(T);function _(e,t){return D.apply(this,arguments)}function D(){return(D=Object(x.a)(O.a.mark((function e(t,n){var a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(a=Object(M.a)({},n))._id,delete a.email,delete a.token,e.next=6,fetch("/api/v1/set_user_config",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+t.token},body:JSON.stringify(a)});case 6:return o=e.sent,e.next=9,o;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n){return F.apply(this,arguments)}function F(){return(F=Object(x.a)(O.a.mark((function e(t,n,a){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/file_upload",{method:"POST",headers:{Authorization:"Token "+a.token,UploadType:n},body:t});case 2:return o=e.sent,e.next=5,o;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_dbt_cloud_accounts",{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(x.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_dbt_cloud_jobs/"+n,{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return a=e.sent,e.next=5,a;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t=Object(a.useState)(""),n=Object(h.a)(t,2),o=n[0],r=n[1],s=Object(a.useState)("LiveDB"),c=Object(h.a)(s,2),i=(c[0],c[1],Object(a.useState)({})),l=Object(h.a)(i,2),d=l[0],u=l[1],f=Object(a.useState)({}),O=Object(h.a)(f,2),x=O[0],g=O[1],v=Object(a.useState)({}),C=Object(h.a)(v,2),S=C[0],k=C[1],N=Object(a.useRef)(null),T=Object(a.useRef)(null),D=Object(a.useRef)(null),F=Object(a.useRef)(null);function P(t,n){var a=Object(M.a)({},e.userConfig);a[n]=t,e.setUserConfig(a),_(e.user,a)}function I(t,n){if(t.length>0){var a=new FormData;a.append("file",t[0]),A(a,n,e.user).then((function(t){!0===t.ok?e.toastSender(n+" Upload Successful.","success"):t.text().then((function(t){e.toastSender(n+" Upload Failed: \n"+t,"error")}))}))}}function z(){(function(e){return K.apply(this,arguments)})(e.user).then((function(e){return e.json()})).then((function(e){u(e),B()}))}function B(){(function(e,t){return H.apply(this,arguments)})(e.user,D.current.value).then((function(e){return e.json()})).then((function(e){g(e)}))}return fetch("/license.md",{method:"GET",headers:{Accept:"application/text","Content-Type":"application/text"}}).then((function(e){return e.text()})).then((function(e){k(e)})),"Config"===e.appState?(console.log(S),Object(w.jsxs)("div",{className:"container mt-3",children:[Object(w.jsx)("h1",{children:"Config"}),Object(w.jsxs)(b.a,{defaultActiveKey:"userdetails",id:"config",children:[Object(w.jsx)(m.a,{eventKey:"userdetails",title:"User Details",className:"border-right border-left border-bottom p-3",children:Object(w.jsxs)(j.a,{children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"firstname",children:[Object(w.jsx)(j.a.Label,{children:"First Name"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.firstname,onChange:function(e){return P(e.target.value,"firstname")}})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"lastname",children:[Object(w.jsx)(j.a.Label,{children:"Last Name"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.lastname,onChange:function(e){return P(e.target.value,"lastname")}})]})]})}),Object(w.jsx)(m.a,{eventKey:"gitConfig",title:"Git Config",className:"border-right border-left border-bottom p-3",children:Object(w.jsxs)(j.a,{children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"gitSSHKey",children:[Object(w.jsx)(j.a.Label,{children:"SSH Key"}),Object(w.jsx)("br",{}),Object(w.jsx)(p.a,{variant:"primary",onClick:function(t){t.stopPropagation(),e.setSSHKey()},className:"m-1",children:"Get current SSH public key"}),Object(w.jsx)(p.a,{variant:"warning",className:"m-1",onClick:function(t){t.stopPropagation(),"New Key"===prompt("This will delete any current SSH keys. Please type 'New Key' to continue")&&e.generateSSHKey()},children:"Create new SSH Key"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,as:"textarea",rows:2,value:e.sshKey,ref:N}),document.queryCommandSupported("copy")&&Object(w.jsxs)("div",{children:[Object(w.jsx)(p.a,{variant:"primary",onClick:function(e){N.current.select(),document.execCommand("copy"),e.target.focus(),r("Copied!")},className:"m-1",children:"Copy"}),o]}),Object(w.jsxs)(j.a.Text,{id:"gitSSHHelpBlock",muted:!0,children:["Where to add your key:",Object(w.jsx)("br",{}),Object(w.jsx)("a",{href:"https://github.com/settings/ssh/new",children:"GitHub SSH Keys - Add New"}),Object(w.jsx)("br",{}),Object(w.jsx)("a",{href:"https://gitlab.com/profile/keys",children:"GitLab SSH Keys - Add an SSH key"}),Object(w.jsx)("br",{})]})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"gitrepo",children:[Object(w.jsx)(j.a.Label,{children:"Git SSH URL"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.gitrepo||"",onChange:function(e){return P(e.target.value,"gitrepo")}}),Object(w.jsxs)(j.a.Text,{id:"gitSSHHelpBlock",muted:!0,children:["Examples:",Object(w.jsx)("br",{}),"git@github.com:yourname/yourproject.git",Object(w.jsx)("br",{}),"git@gitlab.com:yourname/yourproject.git"]})]}),Object(w.jsx)(p.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),e.openGitConnection()},children:"Clone Git Repository"})]})}),Object(w.jsx)(m.a,{eventKey:"dbtConfig",title:"DBT Config",className:"border-right border-left border-bottom p-3",children:Object(w.jsxs)(j.a,{children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"dbtConfigMethod",children:[Object(w.jsx)(j.a.Label,{children:"dbt_ Config Method"}),Object(w.jsxs)("div",{className:"mb-3",children:[Object(w.jsx)(j.a.Check,{custom:!0,inline:!0,label:"Live Database Connection",type:"radio",id:"LiveDB",checked:"LiveDB"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),P("LiveDB","dbtmethod")}}),Object(w.jsx)(j.a.Check,{custom:!0,inline:!0,label:"Upload Compiled Metadata",type:"radio",id:"UploadMetadata",checked:"UploadMetadata"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),P("UploadMetadata","dbtmethod")}}),Object(w.jsx)(j.a.Check,{custom:!0,inline:!0,label:"dbt_ Cloud API",type:"radio",id:"Cloud",checked:"Cloud"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),P("Cloud","dbtmethod")}})]},"custom-inline-radio")]}),Object(w.jsx)("hr",{}),Object(w.jsxs)("div",{className:"LiveDB"===e.userConfig.dbtmethod?null:"d-none",children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"uploadProfilesYML",children:[Object(w.jsx)(j.a.Label,{children:"Upload Profiles.YML"}),Object(w.jsx)(j.a.File,{className:"position-relative",required:!0,name:"profilesYMLUpload",onChange:function(e){return I(e.target.files,"ProfilesYML")},id:"profilesYMLUpload",feedbackTooltip:!0}),Object(w.jsxs)(j.a.Text,{id:"profilesYMLHelpBlock",muted:!0,children:["To connect to your database, DBT requires a profiles.yml file. See ",Object(w.jsx)("a",{href:"https://docs.getdbt.com/dbt-cli/configure-your-profile",children:"the dbt_ docs"})," for setup details."]})]}),Object(w.jsx)(p.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),e.checkDBTConnection()},children:"Check DBT Connection"})]}),Object(w.jsxs)("div",{className:"UploadMetadata"===e.userConfig.dbtmethod?null:"d-none",children:[Object(w.jsx)("p",{children:Object(w.jsxs)("i",{children:["To run without connecting to your database, the catalog requires metadata from dbt_.",Object(w.jsx)("br",{}),"Run ",Object(w.jsx)("code",{children:"dbt docs generate"})," in your dbt_ project, and upload the Manifest and Catalog from /target."]})}),Object(w.jsx)("p",{children:Object(w.jsxs)("i",{children:["To automate this upload, download ",Object(w.jsx)("code",{children:"tangata_refresh.py"})," from the Tangata git repository, and run it in the root of your project."]})}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"uploadManifestJSON",children:[Object(w.jsx)(j.a.Label,{children:"Upload manifest.json"}),Object(w.jsx)(j.a.File,{className:"position-relative",required:!0,name:"manifestJSONUpload",onChange:function(e){return I(e.target.files,"ManifestJSON")},id:"manifestJSONUpload",feedbackTooltip:!0})]}),Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"uploadCatalogJSON",children:[Object(w.jsx)(j.a.Label,{children:"Upload catalog.json"}),Object(w.jsx)(j.a.File,{className:"position-relative",required:!0,name:"catalogJSONUpload",onChange:function(e){return I(e.target.files,"CatalogJSON")},id:"catalogJSONUpload",feedbackTooltip:!0})]}),Object(w.jsx)(p.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),y(e.user)},children:"Load Metadata"})]}),Object(w.jsxs)("div",{className:"Cloud"===e.userConfig.dbtmethod?null:"d-none",children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"firstname",children:[Object(w.jsx)(j.a.Label,{children:"dbt_ Cloud API Key"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,type:"text",placeholder:"Change dbt_ Cloud Key",ref:T})]}),Object(w.jsx)(p.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),function(t){if(t.length>0){var n=new FormData,a=new Blob([t],{type:"text/plain"});n.append("file",a),A(n,"dbt_ Cloud Key",e.user).then((function(t){!0===t.ok?e.toastSender("dbt_ Cloud Key Upload Successful.","success"):t.text().then((function(t){e.toastSender("dbt_ Cloud Key Upload Failed: \n"+t,"error")}))}))}}(T.current.value),z()},children:"Load dbt_ Cloud Accounts"}),d.length>0?Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"dbt_cloud_accounts",children:[Object(w.jsx)(j.a.Label,{children:"dbt_ Cloud Accounts"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,as:"select",custom:!0,ref:D,onChange:function(e){return B()},children:d.map((function(e,t){return Object(w.jsxs)("option",{value:e.id,children:[e.id,": ",e.name]},"dbt account "+t)}))})]}):null,x.length>0?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(j.a.Group,{size:"lg",controlId:"dbt_cloud_jobs",children:[Object(w.jsx)(j.a.Label,{children:"dbt_ Cloud Jobs"}),Object(w.jsx)(j.a.Control,{autoFocus:!0,as:"select",custom:!0,ref:F,children:x.map((function(e,t){return Object(w.jsxs)("option",{value:e.id,children:[e.id,": ",e.name]},"dbt job "+t)}))})]}),Object(w.jsx)(p.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),function(){var t=Object(M.a)({},e.userConfig);t.dbt_cloud_account=D.current.value,t.dbt_cloud_job=F.current.value,_(e.user,t),e.setUserConfig(t)}()},children:"Save"})]}):null]})]})}),Object(w.jsx)(m.a,{eventKey:"license",title:"License",className:"border-right border-left border-bottom p-3",children:Object(w.jsx)(L.a,{children:S})})]})]})):""}var I=n(11),z=n(611),B=n(613),U=n(273),E=n(132),G=n(614),R=n(93),J=n(616),V=n(130);function q(e){var t=e.model,n=e.modelIndex,o=e.saveEditedModel,r=e.models,s=e.toggleJoinModal,c=e.showJoinModal,i=Object(a.useState)(t),l=Object(h.a)(i,2),d=l[0],u=l[1],b=Object(V.a)(),m=b.register,f=b.handleSubmit;if(0===n)return null;var O=function(){return s(-1)},x=function(e,t,n){return!1===n?Object(w.jsx)("tr",{className:"row",children:Object(w.jsx)("td",{className:"col w-100",children:e.fullName})},"joinCondition_"+t):Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{className:"p-2",children:e.fullName}),Object(w.jsx)("td",{className:"w-md-auto p-2",children:Object(w.jsx)(p.a,{variant:"secondary",onClick:function(){return function(e){u(Object(M.a)(Object(M.a)({},d),{},{joinConditions:d.joinConditions.filter((function(t){return t!==e}))}))}(e)},children:"Remove"})})]},"joinCondition_"+t)},g=function(e){return d.joinConditions.map((function(t,n){return x(t,n,e)}))},v=function(e,t,n,a){for(var o={},r=0;r<e.response.models.length;r++)e.response.models[r].name===t&&(o=e.response.models[r]);if(null===o)return null;if(0===o.columns.length)return null;var s=o.columns.map((function(e,t){return function(e,t){return Object(w.jsx)("option",{children:e},t)}(e,t)}));return Object(w.jsx)(j.a.Control,{as:"select",name:a,ref:n,children:s})};return Object(w.jsxs)("div",{children:[Object(w.jsx)(p.a,{variant:"primary",onClick:function(){u(JSON.parse(JSON.stringify(t))),s(n)},children:"Edit Join"}),Object(w.jsx)("table",{className:"table",children:Object(w.jsx)("tbody",{children:g(!1)})}),Object(w.jsxs)(J.a,{show:c===n,onHide:O,size:"lg",children:[Object(w.jsx)(J.a.Header,{closeButton:!0,children:Object(w.jsx)(J.a.Title,{children:"Edit Join "})}),Object(w.jsxs)(J.a.Body,{children:[Object(w.jsxs)(z.a,{children:[Object(w.jsx)("h5",{children:"Join Conditions"}),Object(w.jsx)("table",{className:"table-striped table-bordered w-100",children:Object(w.jsx)("tbody",{children:g(!0)})})]}),Object(w.jsxs)(z.a,{className:"mt-3",children:[Object(w.jsx)("h5",{children:"Add new Join Condition"}),Object(w.jsx)(j.a,{onSubmit:f((function(e){var a={conditionField1:{model:t.name,column:e.condition1Field},conditionOperator:e.conditionOperator,conditionField2:{model:r.response.models[n-1].name,column:e.condition2Field},fullName:t.name+"."+e.condition1Field+" "+e.conditionOperator+" "+r.response.models[n-1].name+"."+e.condition2Field};u(Object(M.a)(Object(M.a)({},d),{},{joinConditions:d.joinConditions.concat(a)}))})),children:Object(w.jsxs)("div",{className:"row text-center ",children:[Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)(j.a.Group,{children:[Object(w.jsx)(j.a.Label,{children:t.name}),v(r,t.name,m,"condition1Field")]})}),Object(w.jsx)("div",{className:"col-md-auto",children:Object(w.jsxs)(j.a.Group,{children:[Object(w.jsx)(j.a.Label,{children:"Operator type"}),Object(w.jsxs)(j.a.Control,{name:"conditionOperator",as:"select",ref:m,children:[Object(w.jsx)("option",{children:"="}),Object(w.jsx)("option",{children:">="}),Object(w.jsx)("option",{children:"<="})]})]})}),Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)(j.a.Group,{children:[Object(w.jsx)(j.a.Label,{children:r.response.models[n-1].name}),v(r,r.response.models[n-1].name,m,"condition2Field")]})}),Object(w.jsx)("div",{className:"col-md-auto",children:Object(w.jsx)(p.a,{variant:"primary",type:"submit",className:"joinConditionAddButton",children:"Add"})})]})})]})]}),Object(w.jsxs)(J.a.Footer,{children:[Object(w.jsx)(p.a,{variant:"secondary",onClick:O,children:"Close"}),Object(w.jsx)(p.a,{variant:"primary",onClick:function(){o(t,d),O()},children:"Save Changes"})]})]})]})}var Q=n(615),Y=n(612);function W(e){var t=e.models,n=e.modelDragEnd,o=e.showColumns,r=e.saveEditedModel,s=e.toggleJoinModal,c=e.showJoinModal,i=e.highlightedColumns,l=e.openContextMenu,d=e.contextMenuOpen,u=e.editSelect,j=Object(a.useState)({x:null,y:null,display:!1}),p=Object(h.a)(j,2),b=p[0],m=p[1];if(0===t.length)return null;!1===d&&!0===b.display&&m({x:null,y:null,display:!1});var f=function(e,n,a,o,s,c,i){var d=function(t,n){var a=t.map((function(t,n){return function(t,n){for(var a=function(e){"click"===e.type?(m({x:null,y:null,display:!1}),l(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===b.display?(m({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),l(!0)):(m({x:null,y:null,display:!1}),l(!1)))},o=!1,r=0;r<c.length;r++)e.name===c[r].model&&t===c[r].column&&(o=!0);return Object(w.jsxs)("tr",{className:n%2===0?"odd":"even",onClick:function(e){return a(e)},onContextMenu:function(e){return a(e)},"data-model":e.name,"data-column":t,children:[Object(w.jsx)("td",{className:"col-md-auto "+(o?"highlightColumn":null),children:n+1}),Object(w.jsx)("td",{className:"col "+(o?"highlightColumn":null),children:t})]},n)}(t,n)}));return Object(w.jsx)("tbody",{children:a})};return Object(w.jsx)(R.b,{draggableId:e.name,index:n,children:function(c,i){return Object(w.jsxs)("div",Object(M.a)(Object(M.a)(Object(M.a)({ref:c.innerRef},c.draggableProps),c.dragHandleProps),{},{className:"col removeFocusOutline",children:[Object(w.jsx)("div",{className:"w-100 bg-secondary text-white text-center font-weight-bold",children:e.name}),Object(w.jsx)("div",{className:"w-100 bg-light text-dark text-center font-italic mb-3",children:e.description}),Object(w.jsx)("div",{className:"w-100 bg-light text-dark text-center",children:Object(w.jsx)(q,{model:e,saveEditedModel:r,models:t,showJoinModal:o,toggleJoinModal:s,modelIndex:n})}),Object(w.jsx)("table",{className:"table table-bordered table-striped table-hover w-100",children:!0===a?d(e.columns):null})]}))}},"model_"+e.name)},O=function(e,t,n,a){return e.response.models.map((function(e,o){return f(e,o,t,n,a,i)}))};return Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsx)("h2",{children:"Models"}),Object(w.jsx)("div",{className:"container",children:Object(w.jsx)(R.a,{onDragEnd:n,children:Object(w.jsx)(R.c,{droppableId:"droppable",children:function(e,n){return Object(w.jsxs)("div",Object(M.a)(Object(M.a)({},e.droppableProps),{},{ref:e.innerRef,children:[O(t,o,c,s),e.placeholder]}))}})})}),function(e,t){if(!1===e.display)return null;return Object(w.jsx)("div",{children:Object(w.jsx)(Q.a,{target:e.target,show:e.display,placement:"right-start",children:Object(w.jsx)("div",{children:Object(w.jsx)(Y.a,{bordered:!0,variant:"dark",children:Object(w.jsx)("tbody",{children:Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return t={inputColumns:[{model:e.target.parentNode.dataset.model,column:e.target.parentNode.dataset.column}],alias:e.target.parentNode.dataset.column},u(null,t),void l(!1);var t},children:"Add to Output"})})})})})})})}(b)]})}var X=n(277),Z=n(26),$=n(276),ee=n.n($),te=n(170),ne=n.n(te),ae=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).isTrigger=o.isTrigger.bind(Object(Z.a)(o)),o.getMatch=o.getMatch.bind(Object(Z.a)(o)),o.handleChange=o.handleChange.bind(Object(Z.a)(o)),o.handleKeyDown=o.handleKeyDown.bind(Object(Z.a)(o)),o.handleResize=o.handleResize.bind(Object(Z.a)(o)),o.handleSelection=o.handleSelection.bind(Object(Z.a)(o)),o.updateCaretPosition=o.updateCaretPosition.bind(Object(Z.a)(o)),o.updateHelper=o.updateHelper.bind(Object(Z.a)(o)),o.resetHelper=o.resetHelper.bind(Object(Z.a)(o)),o.renderAutocompleteList=o.renderAutocompleteList.bind(Object(Z.a)(o)),o.state={helperVisible:!1,left:0,matchLength:0,matchStart:0,options:[],fullOptions:[],selection:0,top:0,value:null},o.recentValue=e.defaultValue,o.enableSpaceRemovers=!1,o.refInput=Object(a.createRef)(),o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props.options,n=this.props.fullOptions,a=this.state.caret;t.length!==e.options.length&&this.updateHelper(this.recentValue,a,t,n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getMatch",value:function(e,t,n,a){for(var o=this,r=this.props,s=r.trigger,c=r.matchAny,i=r.regex,l=new RegExp(i),d=s.length,u=s.match(l),h=t-1;h>=0;--h){var j=e.substring(h,t).match(l),p=-1;if(d>0){var b=u?h:h-d+1;if(b<0)return null;if(this.isTrigger(e,b)&&(p=b+d),!j&&p<0)return null}else{if(j&&h>0)continue;if(t-(p=0===h&&j?0:h+1)===0)return null}if(p>=0){var m,f,O=function(){var a=e.substring(p,t),r=n.filter((function(e){var t=e.toLowerCase().indexOf(a.toLowerCase());return-1!==t&&(c||0===t)}));for(m=[],f=0;f<n.length;f++){var s=n[f].toLowerCase().indexOf(a.toLowerCase());-1===s||!c&&0!==s||m.push(o.props.fullOptions[f])}o.setState({fullOptions:m});var i=a.length;return{v:{matchStart:p,matchLength:i,options:r}}}();if("object"===typeof O)return O.v}}return null}},{key:"isTrigger",value:function(e,t){var n=this.props.trigger;return!n||!n.length||e.substr(t,n.length)===n}},{key:"handleChange",value:function(e){var t=this.props,n=t.onChange,a=t.options,o=t.fullOptions,r=t.spaceRemovers,s=t.spacer,c=t.value,i=this.recentValue,l=e.target.value,d=ne()(e.target).end;if(l.length||this.setState({helperVisible:!1}),this.recentValue=l,this.setState({caret:d,value:e.target.value}),!l.length||!d)return n(e.target.value);if(this.enableSpaceRemovers&&r.length&&l.length>2&&s.length){for(var u=0;u<Math.max(i.length,l.length);++u)if(i[u]!==l[u]){if(u>=2&&l[u-1]===s&&-1===r.indexOf(l[u-2])&&-1!==r.indexOf(l[u])&&this.getMatch(l.substring(0,u-2),d-3,a,o)){var h="".concat(l.slice(0,u-1)).concat(l.slice(u,u+1)).concat(l.slice(u-1,u)).concat(l.slice(u+1));return this.updateCaretPosition(u+1),this.refInput.current.value=h,c||this.setState({value:h}),n(h)}break}this.enableSpaceRemovers=!1}return this.updateHelper(l,d,a,o),c||this.setState({value:e.target.value}),n(e.target.value)}},{key:"handleKeyDown",value:function(e){var t=this.state,n=t.helperVisible,a=t.options,o=t.selection,r=this.props,s=r.onKeyDown,c=r.passThroughEnter;if(n)switch(e.keyCode){case 27:e.preventDefault(),this.resetHelper();break;case 38:e.preventDefault(),this.setState({selection:(a.length+o-1)%a.length});break;case 40:e.preventDefault(),this.setState({selection:(o+1)%a.length});break;case 14:case 13:c||e.preventDefault(),this.handleSelection(o);break;case 9:this.handleSelection(o);break;default:s(e)}else s(e)}},{key:"handleResize",value:function(){this.setState({helperVisible:!1})}},{key:"handleSelection",value:function(e){var t=this.state,n=t.matchStart,a=t.matchLength,o=t.fullOptions,r=this.props,s=r.spacer,c=r.onSelect,i=o[e],l=this.recentValue,d=l.substring(0,n),u=l.substring(n+a),h={target:this.refInput.current};h.target.value="".concat(d).concat(i).concat(s).concat(u),this.handleChange(h),c(h.target.value),this.resetHelper(),this.updateCaretPosition(d.length+i.length+1),this.enableSpaceRemovers=!0}},{key:"updateCaretPosition",value:function(e){var t=this;this.setState({caret:e},(function(){return Object(te.setCaretPosition)(t.refInput.current,e)}))}},{key:"updateHelper",value:function(e,t,n,a){var o=this.refInput.current,r=this.getMatch(e,t,n,a);if(r){var s=ee()(o,t),c=o.getBoundingClientRect(),i=s.top+o.offsetTop,l=Math.min(s.left+o.offsetLeft-10,o.offsetLeft+c.width-100),d=this.props,u=d.minChars,h=d.onRequestOptions,j=d.requestOnlyIfNoOptions;r.matchLength>=u&&(r.options.length>1||1===r.options.length&&r.options[0].length!==r.matchLength)?this.setState(Object(M.a)({helperVisible:!0,top:i,left:l},r)):(j&&r.options.length||h(e.substr(r.matchStart,r.matchLength)),this.resetHelper())}else this.resetHelper()}},{key:"resetHelper",value:function(){this.setState({helperVisible:!1,selection:0})}},{key:"renderAutocompleteList",value:function(){var e=this,t=this.state,n=t.helperVisible,a=t.left,o=t.matchStart,r=t.matchLength,s=t.options,c=(t.fullOptions,t.selection),i=t.top,l=t.value;if(!n)return null;var d=this.props,u=d.maxOptions,h=d.offsetX,j=d.offsetY;if(0===s.length)return null;if(c>=s.length)return this.setState({selection:0}),null;var p=0===u?s.length:u,b=s.slice(0,p).map((function(t,n){var a=t.toLowerCase().indexOf(l.substr(o,r).toLowerCase());return Object(w.jsxs)("li",{className:n===c?"active":null,onClick:function(){e.handleSelection(n)},onMouseEnter:function(){e.setState({selection:n})},children:[t.slice(0,a),Object(w.jsx)("strong",{children:t.substr(a,r)}),t.slice(a+r)]},t)}));return Object(w.jsx)("ul",{className:"react-autocomplete-input",style:{left:a+h,top:i+j},children:b})}},{key:"render",value:function(){var e=this.props,t=e.Component,n=e.defaultValue,a=e.disabled,o=e.onBlur,r=e.value,s=Object(X.a)(e,["Component","defaultValue","disabled","onBlur","value"]),c=this.state.value,i=Object.assign({},s);Object.keys(this.constructor.propTypes).forEach((function(e){delete i[e]}));var l="";return"undefined"!==typeof r&&null!==r?l=r:c?l=c:n&&(l=n),Object(w.jsxs)("span",{children:[Object(w.jsx)(t,Object(M.a)({disabled:a,onBlur:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:this.refInput,value:l},i)),this.renderAutocompleteList()]})}}]),n}(o.a.Component);ae.defaultProps={Component:"textarea",defaultValue:"",disabled:!1,maxOptions:6,onBlur:function(){},onChange:function(){},onKeyDown:function(){},onRequestOptions:function(){},onSelect:function(){},options:[],fullOptions:[],regex:"^[A-Za-z0-9\\-_]+$",matchAny:!1,minChars:0,requestOnlyIfNoOptions:!0,spaceRemovers:[",",".","!","?"],spacer:" ",trigger:"@",offsetX:0,offsetY:0,value:null,passThroughEnter:!1};var oe=ae,re=function(e){var t=e.models,n=e.conditions,r=e.editCondition,s=e.openContextMenu,c=e.contextMenuOpen,i=Object(a.useState)({x:null,y:null,display:!1}),l=Object(h.a)(i,2),d=l[0],u=l[1],b=Object(a.useState)({show:!1,conditionToEdit:null}),m=Object(h.a)(b,2),f=m[0],O=m[1],x=Object(V.a)();x.register,x.handleSubmit;if(!1===c&&!0===d.display&&u({x:null,y:null,display:!1}),0===t.length)return null;return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{className:"text-center",children:"Conditions"}),Object(w.jsxs)("div",{children:[function(e,t,n){if(0===e.length)return null;for(var a=function(e){"click"===e.type?(u({x:null,y:null,display:!1}),n(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===d.display?(u({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),n(!0)):(u({x:null,y:null,display:!1}),n(!1)))},o=function(e,t,n){return Object(w.jsx)("tr",{className:"componentRow ",onClick:n,onContextMenu:n,children:Object(w.jsx)("td",{md:"auto",className:"fullSize",children:Object(w.jsx)("div",{className:"componentContent",children:e})})},t)},r=[],s=0;s<e.length;s++)r.push(o(e[s],s,a));return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"w-100 bg-secondary text-white text-center",children:"Add / Remove Conditions to filter results"}),Object(w.jsx)(Y.a,{striped:!0,bordered:!0,children:Object(w.jsx)("tbody",{children:r})})]})}(n,0,s),function(e){if(!1===e.display)return null;return Object(w.jsx)("div",{children:Object(w.jsx)(Q.a,{target:e.target,show:e.display,placement:"right-start",children:Object(w.jsx)("div",{children:Object(w.jsx)(Y.a,{bordered:!0,variant:"dark",children:Object(w.jsxs)("tbody",{children:[Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return e.target.firstChild.data,O({show:!0,conditionToEdit:e.target.firstChild.data}),void s(!1)},children:Object(w.jsx)("div",{children:"Edit Condition"})})}),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return t=e.target.firstChild.data,r(t,null),void s(!1);var t},children:"Delete Condition"})})]})})})})})}(d),function(e,n,a){if(!1===e.menuOpen)return null;var r=o.a.createRef();return Object(w.jsx)("div",{children:Object(w.jsxs)(J.a,{show:e.show,onHide:n,children:[Object(w.jsx)(J.a.Header,{closeButton:!0,children:Object(w.jsx)(J.a.Title,{children:"Edit Join "})}),Object(w.jsxs)(J.a.Body,{children:["Join Conditions:",Object(w.jsx)(j.a,{children:Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)(j.a.Group,{children:[Object(w.jsx)(j.a.Label,{children:"Condition Criteria"}),Object(w.jsx)(oe,{className:"form-control",rows:3,ref:r,options:function(){for(var e=[],n=0;n<t.response.models.length;n++)for(var a=0;a<t.response.models[n].columns.length;a++)e.push(t.response.models[n].columns[a]),e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]);return e}(),fullOptions:function(){for(var e=[],n=0;n<t.response.models.length;n++)for(var a=0;a<t.response.models[n].columns.length;a++)e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]),e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]);return e}(),trigger:"",defaultValue:e.conditionToEdit})]})})})})]}),Object(w.jsxs)(J.a.Footer,{children:[Object(w.jsx)(p.a,{variant:"secondary",onClick:n,children:"Close"}),Object(w.jsx)(p.a,{variant:"primary",onClick:function(){a(e.conditionToEdit,r.current.recentValue),n()},children:"Save Changes"})]})]})})}(f,(function(){return O({show:!1,conditionToEdit:null})}),r)]}),Object(w.jsx)("div",{className:"pt-2 text-center",children:Object(w.jsx)(p.a,{variant:"primary",onClick:function(){return O({show:!0,conditionToEdit:null})},children:"Add Condition"})})]})};function se(e){var t=e.models,n=e.openContextMenu,o=e.contextMenuOpen,r=e.selects,s=e.editSelect,c=e.highlightColumn,i=e.outputModel,l=(e.editOutputModel,Object(a.useState)({x:null,y:null,display:!1})),d=Object(h.a)(l,2),u=d[0],p=d[1],b=Object(a.useState)(-1),m=Object(h.a)(b,2),f=m[0],O=m[1],x=Object(a.useState)(-1),g=Object(h.a)(x,2),v=g[0],y=g[1];if(0===t.length)return null;!1===o&&!0===u.display&&p({x:null,y:null,display:!1});return Object(w.jsxs)("div",{children:[Object(w.jsx)("h2",{className:"text-center",children:"Output"}),Object(w.jsx)("div",{className:"w-100 bg-secondary text-white text-center",children:i.name}),Object(w.jsx)("div",{className:"w-100 bg-light text-dark text-center font-italic mb-3",children:i.description?i.description:"New Model"}),Object(w.jsx)("table",{className:"table table-striped table-hover w-100",children:Object(w.jsx)("tbody",{children:function(e,t,n,a){for(var o=function(e){"click"===e.type?(p({x:null,y:null,display:!1}),a(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===u.display?(p({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),a(!0)):(p({x:null,y:null,display:!1}),a(!1)))},r=function(e){e.preventDefault(),O(-1),s(t[f],Object(M.a)(Object(M.a)({},t[f]),{},{alias:e.target.value}))},c=function(e){e.preventDefault(),y(-1),s(t[v],Object(M.a)(Object(M.a)({},t[v]),{},{description:e.target.value}))},i=function(e,t){return f===t?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(j.a,{onSubmit:function(e){return e.preventDefault()},children:Object(w.jsx)(j.a.Group,{children:Object(w.jsx)(j.a.Control,{type:"text",defaultValue:null!==e[t].alias&&void 0!==e[t].alias?e[t].alias:e[t].column,onBlur:function(e){return r(e)},placeholder:"Add name for output field",autoFocus:!0})})})}):Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"w-100 text-dark text-right","data-selectindex":t,children:null!==e[t].alias&&void 0!==e[t].alias?e[t].alias:e[t].column})})},l=function(e,t){return v===t?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(j.a,{onSubmit:function(e){return e.preventDefault()},children:Object(w.jsx)(j.a.Group,{children:Object(w.jsx)(j.a.Control,{type:"text",defaultValue:null!==e[t].description&&void 0!==e[t].description?e[t].description:null,onBlur:function(e){return c(e)},placeholder:"Add description for output field",autoFocus:!0})})})}):null!==e[t].description&&void 0!==e[t].description?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"w-100 text-dark text-right font-italic","data-selectindex":t,children:e[t].description})}):null},d=function(e){var t=[];if(void 0!==e&null!==e)for(var a=0;a<e.inputColumns.length;a++)t.push(e.inputColumns[a]);n(t)},h=[],b=function(e){h.push(Object(w.jsx)("tr",{onMouseEnter:function(){return d(t[e])},onMouseLeave:function(){return d()},onClick:function(e){return o(e)},onContextMenu:function(e){return o(e)},children:Object(w.jsxs)("td",{"data-selectindex":e,children:[i(t,e),l(t,e)]})},e))},m=0;m<t.length;m++)b(m);return h}(0,r,c,n)})}),function(e,t){if(!1===e.display)return null;return Object(w.jsx)("div",{children:Object(w.jsx)(Q.a,{target:e.target,show:e.display,placement:"left-start",children:Object(w.jsx)("div",{children:Object(w.jsx)(Y.a,{bordered:!0,variant:"dark",children:Object(w.jsxs)("tbody",{children:[Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return t=e.target.dataset.selectindex,O(parseInt(t)),void n(!1);var t},children:Object(w.jsx)("div",{children:"Edit Name"})})}),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return t=e.target.dataset.selectindex,y(parseInt(t)),void n(!1);var t},children:Object(w.jsx)("div",{children:"Edit Description"})})}),Object(w.jsx)("tr",{children:Object(w.jsx)("td",{onClick:function(){return a=t[e.target.dataset.selectindex],s(a,null),void n(!1);var a},children:"Delete Field"})})]})})})})})}(u,r)]})}function ce(){return(ce=Object(x.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/model_old/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(e){if(0===e.length)return null;for(var t=e[0].fullName,n=1;n<e.length;n++)t+="\n  AND "+e[n].fullName;return t},le=function(e){var t="SELECT\n",n=function(e){return function(e){return"definition"in e?e.definition:e.inputColumns[0].model+"."+e.inputColumns[0].column}(e)+" AS "+e.alias};if(0!==e.selects.length){t+="  "+n(e.selects[0])+"\n";for(var a=1;a<e.selects.length;a++)t+="  , "+n(e.selects[a])+"\n"}else t+="  *\n";return t},de=function(e){var t="",n=function(e){return'{{ ref("'+e.name+'") }} AS '+e.name};if(0!==e.models.length){t+="FROM "+n(e.models.response.models[0])+"\n";for(var a=1;a<e.models.response.models.length;a++)t+="LEFT JOIN "+n(e.models.response.models[a])+"\n  ON "+ie(e.models.response.models[a].joinConditions)+"\n"}else t+="FROM "+e.outputModel;return t},ue=function(e){var t="";if(0!==e.models.length){t+="WHERE "+e.conditions[0]+"\n";for(var n=1;n<e.conditions.length;n++)t+="  AND "+e.conditions[n]+"\n"}else t+="FROM "+e.outputModel;return t},he=function(e){var t=e.state;return Object(w.jsxs)("div",{children:["Generated SQL:",Object(w.jsxs)("div",{className:"sqlContent",children:[le(t),de(t),ue(t)]})]})},je=(a.Component,n(618));function pe(){return(pe=Object(x.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/model_search/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=function(e){e.addModel;var t=e.logState,n=(e.openSQLPanel,e.openModelBuilder,e.openCatalog),o=e.openConfig,r=e.appState,s=e.contextMenuOpen,c=e.openContextMenu,i=e.selectModel,l=e.user,d=e.setUser,u=e.userConfig,j=e.setUserConfig,p=Object(a.useState)(!1),b=Object(h.a)(p,2),m=b[0],f=b[1],O=Object(a.useState)([]),x=Object(h.a)(O,2),g=x[0],v=x[1],y=Object(a.useRef)(null);!1===s&&!0===m&&f(!1);var C,S=function(e,t){return Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col-sm",children:Object(w.jsxs)("div",{className:"container border-top border-bottom",onClick:function(e){return function(e,t){c(!1),f(!1),e.stopPropagation(),i(g[t].nodeID),n()}(e,t)},children:[Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col font-weight-bold",children:e.modelName.toLowerCase()}),Object(w.jsx)("div",{className:"col font-weight-light font-italic text-right",children:e.nodeID.toLowerCase()})]}),Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col font-italic",children:e.modelDescription})}),"column_name"===e.type||"column_description"===e.type?Object(w.jsxs)("div",{className:"row",children:[Object(w.jsxs)("div",{className:"col",children:["Column: ",e.columnName]}),Object(w.jsx)("div",{className:"col",children:e.columnDescription})]}):null,"tag_name"===e.type?Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"col",children:["Tag: ",e.tagName]})}):null]})})},"searchRow"+t)},k=function(e){if(0===e.target.value.trim().length)return v([]),null;c(!0),f(!0),function(e,t){return pe.apply(this,arguments)}(y.current.value,l).then((function(e){if(0===e.length||e.error)return v([]),null;if(e.searchString===y.current.value){var t=e.results.slice(0,15);v(t)}}))};return Object(w.jsxs)(je.a,{className:"navbar-dark bg-brand position-fixed w-100 z-100",expand:"lg",children:[Object(w.jsx)(je.a.Brand,{href:"/",children:"T\u0100NGATA"}),Object(w.jsx)(je.a.Toggle,{"aria-controls":"navbarContent"}),Object(w.jsxs)(je.a.Collapse,{id:"navbarContent",className:"justify-content-between",children:[Object(w.jsxs)("div",{className:"navbar-nav p-2 bg-brand",children:[Object(w.jsx)("div",{className:"nav-item nav-link bg-brand "+("Catalog"===r?"active":null),role:"button",onClick:function(){return n()},children:"Catalog"}),Object(w.jsx)("div",{className:"nav-item nav-link bg-brand "+("Config"===r?"active":null),role:"button",onClick:function(){return o()},children:"Config"})]}),Object(w.jsxs)("div",{className:"navbar-nav p2",children:[Object(w.jsx)("form",{className:"form-inline",children:Object(w.jsx)("input",{className:"form-control mr-sm-2",type:"search",ref:y,onClick:function(e){return function(e){e.target.value.length>0&&(e.stopPropagation(),c(!0))}(e)},onChange:function(e){return k(e)},onFocus:function(){return f(e=!0),void c(e);var e},placeholder:"Search Models","aria-label":"Search Models"})}),function(){if(0===g.length||!m)return null;var e=g.map((function(e,t){return S(e,t)})),t="Catalog"===r?"open in Catalog":"add to Model Builder";return Object(w.jsx)(Q.a,{target:y,show:m,placement:"bottom",children:Object(w.jsxs)("div",{className:"container bg-light searchbox-width z-200",children:[Object(w.jsx)("div",{className:"row",children:Object(w.jsxs)("div",{className:"col-sm font-weight-bold font-italic",children:["Select model to ",t,":"]})}),e]})})}()]}),Object(w.jsxs)("div",{className:"navbar-nav p-2",children:[Object(w.jsx)("div",{className:"nav-item nav-link mr-sm-2"+("UploadMetadata"!==u.dbtmethod?null:" d-none"),role:"button",onClick:function(){fetch("/api/v1/reload_dbt",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+l.token}})},children:"Refresh dbt_ catalog"}),Object(w.jsx)("div",{className:"nav-item nav-link mr-sm-2",role:"button",onClick:function(){return function(){var e={prTitle:prompt("Please describe your changes:","Added descriptions to models x, y")};fetch("/api/v1/create_pr",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+l.token},body:JSON.stringify(e)})}()},children:"Submit changes"}),(C="production","development"===C?Object(w.jsx)("div",{className:"nav-item nav-link",role:"button",onClick:function(){return t()},children:"Show state in console "}):null),Object(w.jsxs)("div",{className:"nav-item nav-link mr-sm-2",role:"button",onClick:function(){return fetch("/api/v1/users/logout",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+l.token}}),d({user:{}}),sessionStorage.removeItem("user"),j({}),void sessionStorage.removeItem("userconfig")},children:["Logout ",u.firstname]})]})]})]})},me=n(619),fe=n(620),Oe=n(77),xe=n(171),ge=n.n(xe),ve=new ge.a.graphlib.Graph;ve.setDefaultEdgeLabel((function(){return{}}));var ye=200,Ce=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LR";return ve.setGraph({rankdir:t}),e.forEach((function(e){Object(Oe.d)(e)?ve.setNode(e.id,{width:ye,height:33}):ve.setEdge(e.source,e.target)})),ge.a.layout(ve),e.map((function(e){if(Object(Oe.d)(e)){var t=ve.node(e.id);e.targetPosition="left",e.sourcePosition="right",e.position={x:t.x-100+Math.random()/1e3,y:t.y-16.5}}return e}))}(e.lineageArray.lineage),n=Object(a.useState)(t),o=Object(h.a)(n,2),r=o[0];o[1];return Object(w.jsx)("div",{className:"layoutflow lineagebox",children:Object(w.jsx)(Oe.b,{children:Object(w.jsx)(Oe.c,{elements:r,connectionLineType:"smoothstep",onLoad:function(e){e.fitView()},onNodeContextMenu:function(t,n){t.preventDefault(),e.selectModel(n.id)},children:Object(w.jsx)(Oe.a,{})})})})},Se=n(135),ke=n.n(Se),we=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).catalogDescription=function(){return e.props.catalogModel.description?e.props.catalogModel.description:null},e.catalogDependsOn=function(){return Object(w.jsxs)(w.Fragment,{children:[e.props.catalogModel.depends_on?e.props.catalogModel.depends_on.nodes.map((function(t,n){return Object(w.jsxs)("div",{title:t,children:[0===n?Object(w.jsxs)("b",{children:["Models:",Object(w.jsx)("br",{})]}):null,Object(w.jsx)("a",{href:"#",onClick:function(n){n.preventDefault(),e.props.selectModel(t)},children:t.split(".").pop()})]},"catalogDependsOnModel"+n)})):null,e.props.catalogModel.depends_on?e.props.catalogModel.depends_on.macros.map((function(e,t){return Object(w.jsxs)("div",{title:e,children:[0===t?Object(w.jsxs)("b",{children:["Macros:",Object(w.jsx)("br",{})]}):null,e.split(".").pop()]},"catalogDependsOnMacro"+t)})):null]})},e.catalogDependencies=function(){return Object(w.jsx)(w.Fragment,{children:e.props.catalogModel.referenced_by.map((function(t,n){return Object(w.jsxs)("div",{title:t,children:[0===n?Object(w.jsxs)("b",{children:["Models:",Object(w.jsx)("br",{})]}):null,Object(w.jsx)("a",{href:"#",onClick:function(n){n.preventDefault(),e.props.selectModel(t)},children:t.split(".").pop()})]},"catalogDependentModel"+n)}))})},e.nodeContributors=function(){return e.props.catalogModel.all_contributors.length>1?Object(w.jsx)(w.Fragment,{children:e.props.catalogModel.all_contributors.map((function(e,t){return Object(w.jsxs)("div",{title:e,children:[0===t?Object(w.jsxs)("b",{children:["Contributors:",Object(w.jsx)("br",{})]}):null,e]},"nodeContributor"+t)}))}):null},e.nodeHistory=function(){var t=null;if("LiveDB"===e.props.userConfig.dbtmethod){var n=e.props.userConfig.gitrepo.match(/[^@]+@(github.com|gitlab.com):([^.]+).git/);t="http://"+n[1]+"/"+n[2]+"/"}return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("table",{className:"table",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{scope:"col",children:"Date"}),Object(w.jsx)("th",{scope:"col",children:"Author"}),Object(w.jsx)("th",{scope:"col",children:"Commit Message"})]})}),Object(w.jsx)("tbody",{children:e.props.catalogModel.all_commits.map((function(n,a){var o=null;return null!==t&&(o=t+"commit/"+n.hash),Object(w.jsxs)("tr",{title:n.hash,children:[Object(w.jsx)("td",{title:n.authorDate,children:n.authorDateRel}),Object(w.jsx)("td",{children:n.authorName}),Object(w.jsx)("td",{children:Object(w.jsx)("a",{href:null!==e.gitLink?o:null,target:"_blank",children:n.subject})})]},"catalogFileCommit "+a)}))})]})})},e.catalogColumns=function(){return Object.keys(e.props.catalogModel.columns).length>0?Object(w.jsx)("div",{className:"row mt-md-3",children:Object(w.jsx)("div",{className:"col",children:Object(w.jsxs)("table",{className:"table table-sm",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Name"}),Object(w.jsx)("th",{children:"Type"}),Object(w.jsx)("th",{children:"Description"}),Object(w.jsx)("th",{children:"Tests"})]})}),Object(w.jsx)("tbody",{children:Object.entries(e.props.catalogModel.columns).map((function(t,n){var a;return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t[0].toLowerCase()}),Object(w.jsx)("td",{children:t[1].type.toLowerCase()}),Object(w.jsx)("td",{children:Object(w.jsx)(ke.a,{html:t[1].description,onBlur:e.updateMetadataModel,"data-metadatafield":"ColumnDescription","data-columnName":t[0].toLowerCase(),placeholder:"Add a description"})}),Object(w.jsx)("td",{children:(a=t[1].tests,a.map((function(e,t){return"relationships"===e.type?Object(w.jsxs)("div",{className:"test-"+e.severity.toLowerCase(),title:"On fail: "+e.severity,children:["is found in ",e.related_model,".",e.related_field]},"catalogTest"+n+"."+t):Object(w.jsx)("div",{className:"test-"+e.severity.toLowerCase(),title:"On fail: "+e.severity,children:e.type},"catalogTest"+n+"."+t)})))})]},"columnRow"+t[0])}))})]})})}):Object(w.jsx)("div",{className:"row",children:Object(w.jsx)("div",{className:"col col-md-auto",children:"This model does not appear to contain any rows."})})},e.updateMetadataModel=function(t){var n={};switch(t.target.dataset.metadatafield){case"Description":n={updateMethod:"yamlModelProperty",yaml_path:e.props.catalogModel.yaml_path,model_path:e.props.catalogModel.model_path,model:e.props.catalogModel.name,node_id:e.props.catalogModel.nodeID,property_name:"description",new_value:t.target.innerText};break;case"Tags":if("None"===t.target.innerText){n=null;break}n={updateMethod:"yamlModelTags",yaml_path:e.props.catalogModel.yaml_path,model_path:e.props.catalogModel.model_path,model:e.props.catalogModel.name,node_id:e.props.catalogModel.nodeID,property_name:"tags",new_value:t.target.innerText.split(",").map((function(e){return e.trim()}))};break;case"ColumnDescription":n={updateMethod:"yamlModelColumnProperty",yaml_path:e.props.catalogModel.yaml_path,model_path:e.props.catalogModel.model_path,model:e.props.catalogModel.name,node_id:e.props.catalogModel.nodeID,column:t.target.dataset.columnname,property_name:"description",new_value:t.target.innerText}}n&&fetch("/api/v1/update_metadata",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+e.props.user.token},body:JSON.stringify(n)})},e.lineageModal=function(e,t){function n(e){var n=Object(a.useState)(!1),o=Object(h.a)(n,2),r=o[0],s=o[1],c=function(){return s(!1)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.a,{variant:"primary",onClick:function(){return s(!0)},children:"Show Lineage"}),Object(w.jsxs)(J.a,{show:r,onHide:c,size:"xl",children:[Object(w.jsx)(J.a.Header,{closeButton:!0,children:Object(w.jsx)(J.a.Title,{children:"Modal heading"})}),Object(w.jsx)(J.a.Body,{className:"lineagebox",children:Object(w.jsx)(Ce,{className:"lineagebox",lineageArray:e,selectModel:t})}),Object(w.jsx)(J.a.Footer,{children:Object(w.jsx)(p.a,{variant:"secondary",onClick:c,children:"Close"})})]})]})}return Object(w.jsx)(n,{lineage:e})},e.showCreatedBy=function(){if("node"===e.props.catalogModel.model_type&&e.props.catalogModel.created_by)return Object(w.jsx)("div",{className:"row mt-md-3",children:Object(w.jsxs)("div",{className:"col col-md-auto",children:["Created: ",e.props.catalogModel.created_by+(e.props.catalogModel.created_relative_date?", "+e.props.catalogModel.created_relative_date:null)]})})},e}return Object(i.a)(n,[{key:"render",value:function(){if("Catalog"!==this.props.appState)return null;if(0===Object.keys(this.props.catalogModel).length)return Object(w.jsx)("div",{children:"Welcome to the Catalog. Search in the bar above to find models."});var e=this.props.catalogModel.tags.length>0?this.props.catalogModel.tags.join(", "):null;return Object(w.jsxs)(z.a,{className:"catalogContainer display-block",children:[Object(w.jsxs)("div",{className:"row justify-content-md-left",children:[Object(w.jsx)("div",{className:"col col-md-auto pr-md-3",children:Object(w.jsx)("h3",{className:"mb-md-0",children:this.props.catalogModel.name.toLowerCase()})}),Object(w.jsx)("div",{className:"col font-italic align-self-end pl-md-0",children:this.props.catalogModel.materialization}),Object(w.jsxs)("div",{className:"col align-self-end pl-md-0 text-right",children:["tags: ",Object(w.jsx)("i",{children:Object(w.jsx)(ke.a,{innerRef:this.tags,html:e,onBlur:this.updateMetadataModel,"data-metadatafield":"Tags",placeholder:"Add comma-separated Tags",style:{display:"inline",minWidth:"100px"}})})]})]}),Object(w.jsxs)("div",{className:"row justify-content-between pt-md-1",children:[Object(w.jsxs)("div",{className:"col col-md-auto",children:[this.props.catalogModel.database.toLowerCase(),".",this.props.catalogModel.schema.toLowerCase(),".",this.props.catalogModel.name.toLowerCase()]}),Object(w.jsx)("div",{className:"col col-md-auto",children:this.props.catalogModel.row_count?Number(this.props.catalogModel.row_count).toLocaleString()+" rows":null})]}),this.showCreatedBy(),Object(w.jsx)("div",{className:"row mt-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:Object(w.jsx)(ke.a,{innerRef:this.description,html:this.catalogDescription(),onBlur:this.updateMetadataModel,"data-metadatafield":"Description",placeholder:"Add a description"})})}),Object(w.jsx)("div",{className:"row mt-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:this.lineageModal(this.props.catalogModel.lineage,this.props.selectModel)})}),Object(w.jsxs)(me.a,{className:"mt-md-3",defaultActiveKey:"0",children:[Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(fe.a.Header,{children:Object(w.jsx)(me.a.Toggle,{as:p.a,variant:"link",eventKey:"0",children:"Columns"})}),Object(w.jsx)(me.a.Collapse,{eventKey:"0",children:Object(w.jsx)("div",{className:"container",children:this.catalogColumns()})})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(fe.a.Header,{children:Object(w.jsx)(me.a.Toggle,{as:p.a,variant:"link",eventKey:"1",children:"SQL"})}),Object(w.jsx)(me.a.Collapse,{eventKey:"1",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:Object(w.jsxs)(b.a,{defaultActiveKey:"raw",id:"uncontrolled-tab-example",className:"ml-md-1",children:[Object(w.jsx)(m.a,{eventKey:"raw",title:"raw SQL",className:"py-md-3 catalogSQL",children:this.props.catalogModel.raw_sql}),Object(w.jsx)(m.a,{eventKey:"processed",title:"processed SQL",className:"py-md-3 catalogSQL",children:this.props.catalogModel.compiled_sql})]})})})})})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(fe.a.Header,{children:Object(w.jsx)(me.a.Toggle,{as:p.a,variant:"link",eventKey:"2",children:"Code Change History"})}),Object(w.jsx)(me.a.Collapse,{eventKey:"2",children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:this.nodeContributors()})}),Object(w.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:this.nodeHistory()})})]})})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(fe.a.Header,{children:Object(w.jsx)(me.a.Toggle,{as:p.a,variant:"link",eventKey:"3",children:"Depends On"})}),Object(w.jsx)(me.a.Collapse,{eventKey:"3",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:this.catalogDependsOn()})})})})]}),Object(w.jsxs)(fe.a,{children:[Object(w.jsx)(fe.a.Header,{children:Object(w.jsx)(me.a.Toggle,{as:p.a,variant:"link",eventKey:"4",children:"Dependencies"})}),Object(w.jsx)(me.a.Collapse,{eventKey:"4",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(w.jsx)("div",{className:"col col-md-auto",children:this.catalogDependencies()})})})})]})]})]})}}]),n}(a.Component);function Ne(){return(Ne=Object(x.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/models/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return(Me=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_ssh",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/generate_ssh",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){return(Le=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/open_git_connection",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/check_dbt_connection",{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=n(65),Ae=(n(603),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={appState:"Catalog",modelBuilder:{models:[{name:"humans"},{name:"abductions"}],logState:!1,openSQLPanel:!1,addModel:{}},contextMenuOpen:!1,catalogModel:{},sshKey:"",user:{},userConfig:{},userMessages:[]},a.handleAllClicks=function(e){!0===a.state.contextMenuOpen&&a.setState({contextMenuOpen:!1})},a.selectModel=function(e){(function(e,t){return Ne.apply(this,arguments)})(e,a.state.user).then((function(e){e.error||"Catalog"===a.state.appState&&a.setState({catalogModel:e})}))},a.openContextMenu=function(e){!0===e?a.setState({contextMenuOpen:!0}):a.setState({contextMenuOpen:!1})},a.logState=function(){a.setState({logState:!0})},a.openSQLPanel=function(){a.setState({openSQLPanel:!0})},a.addModel=function(){},a.openModelBuilder=function(){a.setState({appState:"ModelBuilder"})},a.openCatalog=function(){a.setState({appState:"Catalog"})},a.openConfig=function(){a.setState({appState:"Config"})},a.setUser=function(e){a.setState({user:e.user})},a.setUserConfig=function(e){a.setState({userConfig:e})},a.setSSHKey=function(){(function(e){return Me.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){a.setState({sshKey:e})}))},a.generateSSHKey=function(){(function(e){return Te.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){a.setState({sshKey:e})}))},a.openGitConnection=function(){(function(e){return Le.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){return e}))},a.checkDBTConnection=function(){(function(e){return _e.apply(this,arguments)})(a.state.user).then((function(e){!0===e.ok?De.b.success("DBT_ Connection Successful."):e.text().then((function(e){De.b.error("DBT_ Connection Failed: "+e,{autoClose:1e4})}))}))},a.toastSender=function(e,t){"error"===t?De.b.error(e):"success"===t?De.b.success(e):Object(De.b)(e)},a.clearUserMessages=function(){a.setState({userMessages:[]})},a.modelBuilder=o.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(){!0===this.state.logState&&(console.log("App State:"),console.log(this.state),this.setState({logState:!1})),!0===this.state.openSQLPanel&&this.setState({openSQLPanel:!1})}},{key:"componentDidMount",value:function(){var e=this;"8080"===window.location.port?(console.log("python"),this.setState({hostVersion:"python"})):(console.log("node"),this.setState({hostVersion:"node"})),0===Object.keys(this.state.user).length&&sessionStorage.getItem("user")&&(S(JSON.parse(sessionStorage.getItem("user")).user).then((function(t){e.setUserConfig(t.user)})),this.setUser(JSON.parse(sessionStorage.getItem("user")))),document.title="T\u0101ngata"}},{key:"render",value:function(){var e=this;if(console.log(window.location.port),"python"!==this.state.hostVersion&&0===Object.keys(this.state.user).length)return Object(w.jsx)("div",{id:"main",children:Object(w.jsx)(N,{setUser:this.setUser,setUserConfig:this.setUserConfig})});var t=null;return(t=Object(u.io)({auth:function(t){t({token:e.state.user})}})).on("connect",(function(){t.send("Hello!")})),t.on("toast",(function(t){e.toastSender(t.message,t.type)})),Object(w.jsxs)("div",{id:"main",onClick:this.handleAllClicks,onContextMenu:this.handleAllClicks,children:[Object(w.jsx)(be,{addModel:this.addModel,logState:this.logState,openSQLPanel:this.openSQLPanel,openModelBuilder:this.openModelBuilder,openCatalog:this.openCatalog,openConfig:this.openConfig,appState:this.state.appState,openContextMenu:this.openContextMenu,contextMenuOpen:this.state.contextMenuOpen,selectModel:this.selectModel,user:this.state.user,setUser:this.setUser,userConfig:this.state.userConfig,setUserConfig:this.setUserConfig}),Object(w.jsxs)("div",{className:"body",children:[Object(w.jsx)(we,{appState:this.state.appState,catalogModel:this.state.catalogModel,selectModel:this.selectModel,user:this.state.user,userConfig:this.state.userConfig}),Object(w.jsx)(P,{appState:this.state.appState,user:this.state.user,userConfig:this.state.userConfig,setUserConfig:this.setUserConfig,sshKey:this.state.sshKey,setSSHKey:this.setSSHKey,generateSSHKey:this.generateSSHKey,openGitConnection:this.openGitConnection,checkDBTConnection:this.checkDBTConnection,toastSender:this.toastSender}),Object(w.jsx)(De.a,{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})]})}}]),n}(a.Component)),Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,621)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),r(e),s(e)}))};s.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(Ae,{})}),document.getElementById("root")),Fe()}},[[604,1,2]]]);
//# sourceMappingURL=main.565cc08b.chunk.js.map