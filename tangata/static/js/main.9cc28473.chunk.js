(this.webpackJsonpsqlgui=this.webpackJsonpsqlgui||[]).push([[0],{167:function(e,t,n){},315:function(e,t,n){},654:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(15),o=n.n(r),c=(n(315),n(4)),i=n(156),l=n(51),d=n(52),u=n(55),h=n(53),j=n(19),b=n(79),p=n(305),m=(n(167),n(168),n(12)),f=n(21),O=n(200),x=n(666),g=n(659),v=n(6),y=n.n(v),C=n(11);function S(){return(S=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return N.apply(this,arguments)}function N(){return(N=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/refresh_metadata",{method:"POST",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return M.apply(this,arguments)}function M(){return(M=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_user_config/",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return L.apply(this,arguments)}function L(){return(L=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_server_config",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(1);function D(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],r=n[1],o=Object(a.useState)(""),c=Object(m.a)(o,2),i=c[0],l=c[1],d=Object(a.useState)(""),u=Object(m.a)(d,2),h=u[0],b=u[1],p=Object(a.useState)(""),v=Object(m.a)(p,2),y=v[0],C=v[1],N=Object(j.g)();return("python"===e.hostVersion||Object.keys(e.user).length>0)&&N.push("/"),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("nav",{class:"navbar-dark bg-brand position-fixed w-100 z-100 navbar navbar-expand-xl navbar-light",children:Object(R.jsx)("div",{class:"navbar-brand",children:"T\u0100NGATA"})}),Object(R.jsxs)("div",{className:"Login",children:[Object(R.jsxs)(x.a,{defaultActiveKey:"login",id:"loginOrRegister",children:[Object(R.jsx)(g.a,{eventKey:"login",title:"Login",children:Object(R.jsxs)(f.a,{onSubmit:function(t){t.preventDefault(),function(e){return S.apply(this,arguments)}({user:{email:s,password:i}}).then((function(t){e.setUser(t),sessionStorage.setItem("user",JSON.stringify(t)),k(t.user),_(t.user).then((function(t){e.setUserConfig(t.user)}))}))},children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"loginEmail",children:[Object(R.jsx)(f.a.Label,{children:"Email"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"email",value:s,onChange:function(e){return r(e.target.value)}})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"loginPassword",children:[Object(R.jsx)(f.a.Label,{children:"Password"}),Object(R.jsx)(f.a.Control,{type:"password",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(R.jsx)(O.a,{block:!0,size:"lg",type:"submit",disabled:!(s.length>0&&i.length>0),children:"Login"})]})}),Object(R.jsx)(g.a,{eventKey:"register",title:"Sign Up",children:Object(R.jsxs)(f.a,{onSubmit:function(t){t.preventDefault(),function(e){return w.apply(this,arguments)}({user:{email:s,password:i,config:{firstname:h,lastname:y}}}).then((function(t){e.setUser(t),sessionStorage.setItem("user",JSON.stringify(t)),k(t.user),_(t.user).then((function(t){e.setUserConfig(t.user)})),T(t.user).then((function(t){e.setServerConfig(t.user)}))}))},children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"registerEmail",children:[Object(R.jsx)(f.a.Label,{children:"Email"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"email",value:s,onChange:function(e){return r(e.target.value)}})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"registerPassword",children:[Object(R.jsx)(f.a.Label,{children:"Password"}),Object(R.jsx)(f.a.Control,{type:"password",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"firstname",children:[Object(R.jsx)(f.a.Label,{children:"First Name"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",value:h,onChange:function(e){return b(e.target.value)}})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"lastname",children:[Object(R.jsx)(f.a.Label,{children:"Last Name"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",value:y,onChange:function(e){return C(e.target.value)}})]}),Object(R.jsx)(O.a,{block:!0,size:"lg",type:"submit",disabled:!(s.length>0&&i.length>0&&h.length>0),children:"Sign Up"})]})})]}),Object(R.jsxs)("div",{className:"container md-3 text-center col-md-5 mt-3",children:[Object(R.jsx)("blockquote",{children:Object(R.jsxs)("p",{children:["\u201cHutia te rito o te harakeke",Object(R.jsx)("br",{}),"Kei whea to k\u014dmako e k\u014d?",Object(R.jsx)("br",{}),"Ki mai ki ahau",Object(R.jsx)("br",{}),"He aha te mea nui o te Ao?",Object(R.jsx)("br",{}),"Maku e k\u012b atu,",Object(R.jsx)("br",{}),Object(R.jsx)("b",{children:"he t\u0101ngata, he t\u0101ngata, he t\u0101ngata"}),'..."']})}),Object(R.jsxs)("p",{children:["If the heart of the harakeke ",Object(R.jsx)("em",{children:"(flax plant)"})," was removed,",Object(R.jsx)("br",{}),"where would the bellbird sing?",Object(R.jsx)("br",{}),"If I was asked what was the most important thing in the world",Object(R.jsx)("br",{}),"I would be compelled to reply,",Object(R.jsx)("br",{}),"it is people, it is people, it is people.",Object(R.jsx)("br",{}),Object(R.jsx)("em",{children:"Ngaroto"})]}),Object(R.jsxs)("p",{children:["In te ao M\u0101ori (the M\u0101ori world view), T\u0101ngata (",Object(R.jsx)("em",{children:"TAHNG-uh-tuh"}),") describes something much larger than an addressed group of people: it describes ",Object(R.jsx)("em",{children:"whakapapa"}),", the surrounding network of ancestors and descendants we are connected to.",Object(R.jsx)("br",{}),"With this work we intend to follow these principles to put our people first: not just the data & analytics engineers, but those around our workplaces that know the deep details of how our businesses actually run.",Object(R.jsx)("br",{}),"These people are the lifeblood of what we do - and to keep moving forward, we need their context far more than ever."]})]})]})]})}n(357);function A(e,t){return F.apply(this,arguments)}function F(){return(F=Object(C.a)(y.a.mark((function e(t,n){var a,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(a=Object(c.a)({},n))._id,delete a.email,delete a.token,e.next=6,fetch("/api/v1/set_user_config",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+t.token},body:JSON.stringify(a)});case 6:return s=e.sent,e.next=9,s;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(C.a)(y.a.mark((function e(t,n){var a,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(c.a)({},n),e.next=3,fetch("/api/v1/set_server_config",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+t.token},body:JSON.stringify(a)});case 3:return s=e.sent,e.next=6,s;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(C.a)(y.a.mark((function e(t,n,a){var s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/file_upload",{method:"POST",headers:{Authorization:"Token "+a.token,UploadType:n},body:t});case 2:return s=e.sent,e.next=5,s;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_dbt_cloud_accounts",{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(C.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_dbt_cloud_jobs/"+n,{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return a=e.sent,e.next=5,a;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),s=n[0],r=n[1],o=Object(a.useState)("LiveDB"),i=Object(m.a)(o,2),l=(i[0],i[1],Object(a.useState)({})),d=Object(m.a)(l,2),u=d[0],h=d[1],j=Object(a.useState)({}),b=Object(m.a)(j,2),p=b[0],v=b[1],y=Object(a.useRef)(null),C=Object(a.useRef)(null),S=Object(a.useRef)(null),w=Object(a.useRef)(null);function N(t,n){var a=Object(c.a)({},e.userConfig);a[n]=t,e.setUserConfig(a),A(e.user,a)}function _(t,n){var a=Object(c.a)({},e.serverConfig);a[n]=t,e.setServerConfig(a),function(e,t){P.apply(this,arguments)}(e.user,a)}function M(t,n){if(t.length>0){var a=new FormData;a.append("file",t[0]),I(a,n,e.user).then((function(t){!0===t.ok?e.toastSender(n+" Upload Successful.","success"):t.text().then((function(t){e.toastSender(n+" Upload Failed: \n"+t,"error")}))}))}}function T(){(function(e){return U.apply(this,arguments)})(e.user).then((function(e){return e.json()})).then((function(e){h(e),L()}))}function L(){(function(e,t){return B.apply(this,arguments)})(e.user,S.current.value).then((function(e){return e.json()})).then((function(e){v(e)}))}return console.log(e.serverConfig),Object(R.jsxs)("div",{className:"container mt-3",children:[Object(R.jsx)("h1",{children:"Config"}),Object(R.jsxs)(x.a,{defaultActiveKey:"python"===e.hostVersion?"modelPromotion":"userdetails",id:"config",children:[Object(R.jsx)(g.a,{eventKey:"userdetails",title:"User Details",className:"border-right border-left border-bottom p-3",tabClassName:"python"===e.hostVersion?"d-none":"",children:Object(R.jsxs)(f.a,{children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"firstname",children:[Object(R.jsx)(f.a.Label,{children:"First Name"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.firstname,onChange:function(e){return N(e.target.value,"firstname")}})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"lastname",children:[Object(R.jsx)(f.a.Label,{children:"Last Name"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.lastname,onChange:function(e){return N(e.target.value,"lastname")}})]})]})}),Object(R.jsx)(g.a,{eventKey:"gitConfig",title:"Git Config",className:"border-right border-left border-bottom p-3",tabClassName:"python"===e.hostVersion?"d-none":"",children:Object(R.jsxs)(f.a,{children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"gitSSHKey",children:[Object(R.jsx)(f.a.Label,{children:"SSH Key"}),Object(R.jsx)("br",{}),Object(R.jsx)(O.a,{variant:"primary",onClick:function(t){t.stopPropagation(),e.setSSHKey()},className:"m-1",children:"Get current SSH public key"}),Object(R.jsx)(O.a,{variant:"warning",className:"m-1",onClick:function(t){t.stopPropagation(),"New Key"===prompt("This will delete any current SSH keys. Please type 'New Key' to continue")&&e.generateSSHKey()},children:"Create new SSH Key"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,as:"textarea",rows:2,value:e.sshKey,ref:y}),document.queryCommandSupported("copy")&&Object(R.jsxs)("div",{children:[Object(R.jsx)(O.a,{variant:"primary",onClick:function(e){y.current.select(),document.execCommand("copy"),e.target.focus(),r("Copied!")},className:"m-1",children:"Copy"}),s]}),Object(R.jsxs)(f.a.Text,{id:"gitSSHHelpBlock",muted:!0,children:["Where to add your key:",Object(R.jsx)("br",{}),Object(R.jsx)("a",{href:"https://github.com/settings/ssh/new",children:"GitHub SSH Keys - Add New"}),Object(R.jsx)("br",{}),Object(R.jsx)("a",{href:"https://gitlab.com/profile/keys",children:"GitLab SSH Keys - Add an SSH key"}),Object(R.jsx)("br",{})]})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"gitrepo",children:[Object(R.jsx)(f.a.Label,{children:"Git SSH URL"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",value:e.userConfig.gitrepo||"",onChange:function(e){return N(e.target.value,"gitrepo")}}),Object(R.jsxs)(f.a.Text,{id:"gitSSHHelpBlock",muted:!0,children:["Examples:",Object(R.jsx)("br",{}),"git@github.com:yourname/yourproject.git",Object(R.jsx)("br",{}),"git@gitlab.com:yourname/yourproject.git"]})]}),Object(R.jsx)(O.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),e.openGitConnection()},children:"Clone Git Repository"})]})}),Object(R.jsx)(g.a,{eventKey:"dbtConfig",title:"DBT Config",className:"border-right border-left border-bottom p-3",tabClassName:"python"===e.hostVersion?"d-none":"",children:Object(R.jsxs)(f.a,{children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"dbtConfigMethod",children:[Object(R.jsx)(f.a.Label,{children:"dbt_ Config Method"}),Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"Live Database Connection",type:"radio",id:"LiveDB",checked:"LiveDB"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),N("LiveDB","dbtmethod")}}),Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"Upload Compiled Metadata",type:"radio",id:"UploadMetadata",checked:"UploadMetadata"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),N("UploadMetadata","dbtmethod")}}),Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"dbt_ Cloud API",type:"radio",id:"Cloud",checked:"Cloud"===e.userConfig.dbtmethod,onClick:function(e){e.stopPropagation(),N("Cloud","dbtmethod")}})]},"custom-inline-radio")]}),Object(R.jsx)("hr",{}),Object(R.jsxs)("div",{className:"LiveDB"===e.userConfig.dbtmethod?null:"d-none",children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"uploadProfilesYML",children:[Object(R.jsx)(f.a.Label,{children:"Upload Profiles.YML"}),Object(R.jsx)(f.a.File,{className:"position-relative",required:!0,name:"profilesYMLUpload",onChange:function(e){return M(e.target.files,"ProfilesYML")},id:"profilesYMLUpload",feedbackTooltip:!0}),Object(R.jsxs)(f.a.Text,{id:"profilesYMLHelpBlock",muted:!0,children:["To connect to your database, DBT requires a profiles.yml file. See ",Object(R.jsx)("a",{href:"https://docs.getdbt.com/dbt-cli/configure-your-profile",children:"the dbt_ docs"})," for setup details."]})]}),Object(R.jsx)(O.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),e.checkDBTConnection()},children:"Check DBT Connection"})]}),Object(R.jsxs)("div",{className:"UploadMetadata"===e.userConfig.dbtmethod?null:"d-none",children:[Object(R.jsx)("p",{children:Object(R.jsxs)("i",{children:["To run without connecting to your database, the catalog requires metadata from dbt_.",Object(R.jsx)("br",{}),"Run ",Object(R.jsx)("code",{children:"dbt docs generate"})," in your dbt_ project, and upload the Manifest and Catalog from /target."]})}),Object(R.jsx)("p",{children:Object(R.jsxs)("i",{children:["To automate this upload, download ",Object(R.jsx)("code",{children:"tangata_refresh.py"})," from the Tangata git repository, and run it in the root of your project."]})}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"uploadManifestJSON",children:[Object(R.jsx)(f.a.Label,{children:"Upload manifest.json"}),Object(R.jsx)(f.a.File,{className:"position-relative",required:!0,name:"manifestJSONUpload",onChange:function(e){return M(e.target.files,"ManifestJSON")},id:"manifestJSONUpload",feedbackTooltip:!0})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"uploadCatalogJSON",children:[Object(R.jsx)(f.a.Label,{children:"Upload catalog.json"}),Object(R.jsx)(f.a.File,{className:"position-relative",required:!0,name:"catalogJSONUpload",onChange:function(e){return M(e.target.files,"CatalogJSON")},id:"catalogJSONUpload",feedbackTooltip:!0})]}),Object(R.jsx)(O.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),k(e.user)},children:"Load Metadata"})]}),Object(R.jsxs)("div",{className:"Cloud"===e.userConfig.dbtmethod?null:"d-none",children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"firstname",children:[Object(R.jsx)(f.a.Label,{children:"dbt_ Cloud API Key"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",placeholder:"Change dbt_ Cloud Key",ref:C})]}),Object(R.jsx)(O.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),function(t){if(t.length>0){var n=new FormData,a=new Blob([t],{type:"text/plain"});n.append("file",a),I(n,"dbt_ Cloud Key",e.user).then((function(t){!0===t.ok?e.toastSender("dbt_ Cloud Key Upload Successful.","success"):t.text().then((function(t){e.toastSender("dbt_ Cloud Key Upload Failed: \n"+t,"error")}))}))}}(C.current.value),T()},children:"Load dbt_ Cloud Accounts"}),u.length>0?Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"dbt_cloud_accounts",children:[Object(R.jsx)(f.a.Label,{children:"dbt_ Cloud Accounts"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,as:"select",custom:!0,ref:S,onChange:function(e){return L()},children:u.map((function(e,t){return Object(R.jsxs)("option",{value:e.id,children:[e.id,": ",e.name]},"dbt account "+t)}))})]}):null,p.length>0?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"dbt_cloud_jobs",children:[Object(R.jsx)(f.a.Label,{children:"dbt_ Cloud Jobs"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,as:"select",custom:!0,ref:w,children:p.map((function(e,t){return Object(R.jsxs)("option",{value:e.id,children:[e.id,": ",e.name]},"dbt job "+t)}))})]}),Object(R.jsx)(O.a,{variant:"primary",className:"m-1",onClick:function(t){t.stopPropagation(),function(){var t=Object(c.a)({},e.userConfig);t.dbt_cloud_account=S.current.value,t.dbt_cloud_job=w.current.value,A(e.user,t),e.setUserConfig(t)}()},children:"Save"})]}):null]})]})}),Object(R.jsx)(g.a,{eventKey:"modelPromotion",title:"Model Promotion",className:"border-right border-left border-bottom p-3",tabClassName:"python"!==e.hostVersion?"d-none":"",children:Object(R.jsxs)(f.a,{children:[Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"promotion_tag",children:[Object(R.jsx)(f.a.Label,{children:"Promotion Tag"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",defaultValue:e.serverConfig.promotion_tag,onChange:function(e){return _(e.target.value,"promotion_tag")}}),Object(R.jsx)(f.a.Text,{id:"promotionTagHelpBlock",muted:!0,children:"This tag will be used in your dbt repository for models you promote in T\u0101ngata. These models will be highlighted in search."})]}),Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"demotion_tag",children:[Object(R.jsx)(f.a.Label,{children:"Demotion Tag"}),Object(R.jsx)(f.a.Control,{autoFocus:!0,type:"text",defaultValue:e.serverConfig.demotion_tag,onChange:function(e){return _(e.target.value,"demotion_tag")}}),Object(R.jsx)(f.a.Text,{id:"demotionTagHelpBlock",muted:!0,children:"This tag will be used in your dbt repository for models you demote in T\u0101ngata. These models will be dimmed in search, and will appear after other results."})]})]})}),Object(R.jsx)(g.a,{eventKey:"yamlConfig",title:"YAML Config",className:"border-right border-left border-bottom p-3",tabClassName:"python"!==e.hostVersion?"d-none":"",children:Object(R.jsx)(f.a,{children:Object(R.jsxs)(f.a.Group,{size:"lg",controlId:"newYAMLNaming",children:[Object(R.jsx)(f.a.Label,{children:"New YAML file behaviour"}),Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"One YAML per folder, named foldername.yml",type:"radio",id:"file_per_folder__folder_name",checked:"file_per_folder__folder_name"===e.serverConfig.schema_file_settings,onClick:function(e){e.stopPropagation(),_("file_per_folder__folder_name","schema_file_settings")}}),Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"One YAML per folder, named schema.yml",type:"radio",id:"file_per_folder__schema_yml",checked:"file_per_folder__schema_yml"===e.serverConfig.schema_file_settings,onClick:function(e){e.stopPropagation(),_("file_per_folder__schema_yml","schema_file_settings")}}),Object(R.jsx)(f.a.Check,{custom:!0,inline:!0,label:"One YAML per model, named modelname.yml",type:"radio",id:"file_per_model__model_name",checked:"file_per_model__model_name"===e.serverConfig.schema_file_settings,onClick:function(e){e.stopPropagation(),_("file_per_model__model_name","schema_file_settings")}})]},"custom-inline-radio")]})})})]})]})}var H=n(13),E=n(660),V=n(662),G=n(306),J=n(154),q=n(663),Q=n(113),Y=n(665),W=n(152);function X(e){var t=e.model,n=e.modelIndex,s=e.saveEditedModel,r=e.models,o=e.toggleJoinModal,i=e.showJoinModal,l=Object(a.useState)(t),d=Object(m.a)(l,2),u=d[0],h=d[1],j=Object(W.a)(),b=j.register,p=j.handleSubmit;if(0===n)return null;var x=function(){return o(-1)},g=function(e,t,n){return!1===n?Object(R.jsx)("tr",{className:"row",children:Object(R.jsx)("td",{className:"col w-100",children:e.fullName})},"joinCondition_"+t):Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{className:"p-2",children:e.fullName}),Object(R.jsx)("td",{className:"w-md-auto p-2",children:Object(R.jsx)(O.a,{variant:"secondary",onClick:function(){return function(e){h(Object(c.a)(Object(c.a)({},u),{},{joinConditions:u.joinConditions.filter((function(t){return t!==e}))}))}(e)},children:"Remove"})})]},"joinCondition_"+t)},v=function(e){return u.joinConditions.map((function(t,n){return g(t,n,e)}))},y=function(e,t,n,a){for(var s={},r=0;r<e.response.models.length;r++)e.response.models[r].name===t&&(s=e.response.models[r]);if(null===s)return null;if(0===s.columns.length)return null;var o=s.columns.map((function(e,t){return function(e,t){return Object(R.jsx)("option",{children:e},t)}(e,t)}));return Object(R.jsx)(f.a.Control,{as:"select",name:a,ref:n,children:o})};return Object(R.jsxs)("div",{children:[Object(R.jsx)(O.a,{variant:"primary",onClick:function(){h(JSON.parse(JSON.stringify(t))),o(n)},children:"Edit Join"}),Object(R.jsx)("table",{className:"table",children:Object(R.jsx)("tbody",{children:v(!1)})}),Object(R.jsxs)(Y.a,{show:i===n,onHide:x,size:"lg",children:[Object(R.jsx)(Y.a.Header,{closeButton:!0,children:Object(R.jsx)(Y.a.Title,{children:"Edit Join "})}),Object(R.jsxs)(Y.a.Body,{children:[Object(R.jsxs)(E.a,{children:[Object(R.jsx)("h5",{children:"Join Conditions"}),Object(R.jsx)("table",{className:"table-striped table-bordered w-100",children:Object(R.jsx)("tbody",{children:v(!0)})})]}),Object(R.jsxs)(E.a,{className:"mt-3",children:[Object(R.jsx)("h5",{children:"Add new Join Condition"}),Object(R.jsx)(f.a,{onSubmit:p((function(e){var a={conditionField1:{model:t.name,column:e.condition1Field},conditionOperator:e.conditionOperator,conditionField2:{model:r.response.models[n-1].name,column:e.condition2Field},fullName:t.name+"."+e.condition1Field+" "+e.conditionOperator+" "+r.response.models[n-1].name+"."+e.condition2Field};h(Object(c.a)(Object(c.a)({},u),{},{joinConditions:u.joinConditions.concat(a)}))})),children:Object(R.jsxs)("div",{className:"row text-center ",children:[Object(R.jsx)("div",{className:"col",children:Object(R.jsxs)(f.a.Group,{children:[Object(R.jsx)(f.a.Label,{children:t.name}),y(r,t.name,b,"condition1Field")]})}),Object(R.jsx)("div",{className:"col-md-auto",children:Object(R.jsxs)(f.a.Group,{children:[Object(R.jsx)(f.a.Label,{children:"Operator type"}),Object(R.jsxs)(f.a.Control,{name:"conditionOperator",as:"select",ref:b,children:[Object(R.jsx)("option",{children:"="}),Object(R.jsx)("option",{children:">="}),Object(R.jsx)("option",{children:"<="})]})]})}),Object(R.jsx)("div",{className:"col",children:Object(R.jsxs)(f.a.Group,{children:[Object(R.jsx)(f.a.Label,{children:r.response.models[n-1].name}),y(r,r.response.models[n-1].name,b,"condition2Field")]})}),Object(R.jsx)("div",{className:"col-md-auto",children:Object(R.jsx)(O.a,{variant:"primary",type:"submit",className:"joinConditionAddButton",children:"Add"})})]})})]})]}),Object(R.jsxs)(Y.a.Footer,{children:[Object(R.jsx)(O.a,{variant:"secondary",onClick:x,children:"Close"}),Object(R.jsx)(O.a,{variant:"primary",onClick:function(){s(t,u),x()},children:"Save Changes"})]})]})]})}var Z=n(664),$=n(661);function ee(e){var t=e.models,n=e.modelDragEnd,s=e.showColumns,r=e.saveEditedModel,o=e.toggleJoinModal,i=e.showJoinModal,l=e.highlightedColumns,d=e.openContextMenu,u=e.contextMenuOpen,h=e.editSelect,j=Object(a.useState)({x:null,y:null,display:!1}),b=Object(m.a)(j,2),p=b[0],f=b[1];if(0===t.length)return null;!1===u&&!0===p.display&&f({x:null,y:null,display:!1});var O=function(e,n,a,s,o,i,l){var u=function(t,n){var a=t.map((function(t,n){return function(t,n){for(var a=function(e){"click"===e.type?(f({x:null,y:null,display:!1}),d(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===p.display?(f({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),d(!0)):(f({x:null,y:null,display:!1}),d(!1)))},s=!1,r=0;r<i.length;r++)e.name===i[r].model&&t===i[r].column&&(s=!0);return Object(R.jsxs)("tr",{className:n%2===0?"odd":"even",onClick:function(e){return a(e)},onContextMenu:function(e){return a(e)},"data-model":e.name,"data-column":t,children:[Object(R.jsx)("td",{className:"col-md-auto "+(s?"highlightColumn":null),children:n+1}),Object(R.jsx)("td",{className:"col "+(s?"highlightColumn":null),children:t})]},n)}(t,n)}));return Object(R.jsx)("tbody",{children:a})};return Object(R.jsx)(Q.b,{draggableId:e.name,index:n,children:function(i,l){return Object(R.jsxs)("div",Object(c.a)(Object(c.a)(Object(c.a)({ref:i.innerRef},i.draggableProps),i.dragHandleProps),{},{className:"col removeFocusOutline",children:[Object(R.jsx)("div",{className:"w-100 bg-secondary text-white text-center font-weight-bold",children:e.name}),Object(R.jsx)("div",{className:"w-100 bg-light text-dark text-center font-italic mb-3",children:e.description}),Object(R.jsx)("div",{className:"w-100 bg-light text-dark text-center",children:Object(R.jsx)(X,{model:e,saveEditedModel:r,models:t,showJoinModal:s,toggleJoinModal:o,modelIndex:n})}),Object(R.jsx)("table",{className:"table table-bordered table-striped table-hover w-100",children:!0===a?u(e.columns):null})]}))}},"model_"+e.name)},x=function(e,t,n,a){return e.response.models.map((function(e,s){return O(e,s,t,n,a,l)}))};return Object(R.jsxs)("div",{className:"text-center",children:[Object(R.jsx)("h2",{children:"Models"}),Object(R.jsx)("div",{className:"container",children:Object(R.jsx)(Q.a,{onDragEnd:n,children:Object(R.jsx)(Q.c,{droppableId:"droppable",children:function(e,n){return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({},e.droppableProps),{},{ref:e.innerRef,children:[x(t,s,i,o),e.placeholder]}))}})})}),function(e,t){if(!1===e.display)return null;return Object(R.jsx)("div",{children:Object(R.jsx)(Z.a,{target:e.target,show:e.display,placement:"right-start",children:Object(R.jsx)("div",{children:Object(R.jsx)($.a,{bordered:!0,variant:"dark",children:Object(R.jsx)("tbody",{children:Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return t={inputColumns:[{model:e.target.parentNode.dataset.model,column:e.target.parentNode.dataset.column}],alias:e.target.parentNode.dataset.column},h(null,t),void d(!1);var t},children:"Add to Output"})})})})})})})}(p)]})}var te=n(34),ne=n(308),ae=n.n(ne),se=n(201),re=n.n(se),oe=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).isTrigger=s.isTrigger.bind(Object(te.a)(s)),s.getMatch=s.getMatch.bind(Object(te.a)(s)),s.handleChange=s.handleChange.bind(Object(te.a)(s)),s.handleKeyDown=s.handleKeyDown.bind(Object(te.a)(s)),s.handleResize=s.handleResize.bind(Object(te.a)(s)),s.handleSelection=s.handleSelection.bind(Object(te.a)(s)),s.updateCaretPosition=s.updateCaretPosition.bind(Object(te.a)(s)),s.updateHelper=s.updateHelper.bind(Object(te.a)(s)),s.resetHelper=s.resetHelper.bind(Object(te.a)(s)),s.renderAutocompleteList=s.renderAutocompleteList.bind(Object(te.a)(s)),s.state={helperVisible:!1,left:0,matchLength:0,matchStart:0,options:[],fullOptions:[],selection:0,top:0,value:null},s.recentValue=e.defaultValue,s.enableSpaceRemovers=!1,s.refInput=Object(a.createRef)(),s}return Object(d.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this.props.options,n=this.props.fullOptions,a=this.state.caret;t.length!==e.options.length&&this.updateHelper(this.recentValue,a,t,n)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"getMatch",value:function(e,t,n,a){for(var s=this,r=this.props,o=r.trigger,c=r.matchAny,i=r.regex,l=new RegExp(i),d=o.length,u=o.match(l),h=t-1;h>=0;--h){var j=e.substring(h,t).match(l),b=-1;if(d>0){var p=u?h:h-d+1;if(p<0)return null;if(this.isTrigger(e,p)&&(b=p+d),!j&&b<0)return null}else{if(j&&h>0)continue;if(t-(b=0===h&&j?0:h+1)===0)return null}if(b>=0){var m,f,O=function(){var a=e.substring(b,t),r=n.filter((function(e){var t=e.toLowerCase().indexOf(a.toLowerCase());return-1!==t&&(c||0===t)}));for(m=[],f=0;f<n.length;f++){var o=n[f].toLowerCase().indexOf(a.toLowerCase());-1===o||!c&&0!==o||m.push(s.props.fullOptions[f])}s.setState({fullOptions:m});var i=a.length;return{v:{matchStart:b,matchLength:i,options:r}}}();if("object"===typeof O)return O.v}}return null}},{key:"isTrigger",value:function(e,t){var n=this.props.trigger;return!n||!n.length||e.substr(t,n.length)===n}},{key:"handleChange",value:function(e){var t=this.props,n=t.onChange,a=t.options,s=t.fullOptions,r=t.spaceRemovers,o=t.spacer,c=t.value,i=this.recentValue,l=e.target.value,d=re()(e.target).end;if(l.length||this.setState({helperVisible:!1}),this.recentValue=l,this.setState({caret:d,value:e.target.value}),!l.length||!d)return n(e.target.value);if(this.enableSpaceRemovers&&r.length&&l.length>2&&o.length){for(var u=0;u<Math.max(i.length,l.length);++u)if(i[u]!==l[u]){if(u>=2&&l[u-1]===o&&-1===r.indexOf(l[u-2])&&-1!==r.indexOf(l[u])&&this.getMatch(l.substring(0,u-2),d-3,a,s)){var h="".concat(l.slice(0,u-1)).concat(l.slice(u,u+1)).concat(l.slice(u-1,u)).concat(l.slice(u+1));return this.updateCaretPosition(u+1),this.refInput.current.value=h,c||this.setState({value:h}),n(h)}break}this.enableSpaceRemovers=!1}return this.updateHelper(l,d,a,s),c||this.setState({value:e.target.value}),n(e.target.value)}},{key:"handleKeyDown",value:function(e){var t=this.state,n=t.helperVisible,a=t.options,s=t.selection,r=this.props,o=r.onKeyDown,c=r.passThroughEnter;if(n)switch(e.keyCode){case 27:e.preventDefault(),this.resetHelper();break;case 38:e.preventDefault(),this.setState({selection:(a.length+s-1)%a.length});break;case 40:e.preventDefault(),this.setState({selection:(s+1)%a.length});break;case 14:case 13:c||e.preventDefault(),this.handleSelection(s);break;case 9:this.handleSelection(s);break;default:o(e)}else o(e)}},{key:"handleResize",value:function(){this.setState({helperVisible:!1})}},{key:"handleSelection",value:function(e){var t=this.state,n=t.matchStart,a=t.matchLength,s=t.fullOptions,r=this.props,o=r.spacer,c=r.onSelect,i=s[e],l=this.recentValue,d=l.substring(0,n),u=l.substring(n+a),h={target:this.refInput.current};h.target.value="".concat(d).concat(i).concat(o).concat(u),this.handleChange(h),c(h.target.value),this.resetHelper(),this.updateCaretPosition(d.length+i.length+1),this.enableSpaceRemovers=!0}},{key:"updateCaretPosition",value:function(e){var t=this;this.setState({caret:e},(function(){return Object(se.setCaretPosition)(t.refInput.current,e)}))}},{key:"updateHelper",value:function(e,t,n,a){var s=this.refInput.current,r=this.getMatch(e,t,n,a);if(r){var o=ae()(s,t),i=s.getBoundingClientRect(),l=o.top+s.offsetTop,d=Math.min(o.left+s.offsetLeft-10,s.offsetLeft+i.width-100),u=this.props,h=u.minChars,j=u.onRequestOptions,b=u.requestOnlyIfNoOptions;r.matchLength>=h&&(r.options.length>1||1===r.options.length&&r.options[0].length!==r.matchLength)?this.setState(Object(c.a)({helperVisible:!0,top:l,left:d},r)):(b&&r.options.length||j(e.substr(r.matchStart,r.matchLength)),this.resetHelper())}else this.resetHelper()}},{key:"resetHelper",value:function(){this.setState({helperVisible:!1,selection:0})}},{key:"renderAutocompleteList",value:function(){var e=this,t=this.state,n=t.helperVisible,a=t.left,s=t.matchStart,r=t.matchLength,o=t.options,c=(t.fullOptions,t.selection),i=t.top,l=t.value;if(!n)return null;var d=this.props,u=d.maxOptions,h=d.offsetX,j=d.offsetY;if(0===o.length)return null;if(c>=o.length)return this.setState({selection:0}),null;var b=0===u?o.length:u,p=o.slice(0,b).map((function(t,n){var a=t.toLowerCase().indexOf(l.substr(s,r).toLowerCase());return Object(R.jsxs)("li",{className:n===c?"active":null,onClick:function(){e.handleSelection(n)},onMouseEnter:function(){e.setState({selection:n})},children:[t.slice(0,a),Object(R.jsx)("strong",{children:t.substr(a,r)}),t.slice(a+r)]},t)}));return Object(R.jsx)("ul",{className:"react-autocomplete-input",style:{left:a+h,top:i+j},children:p})}},{key:"render",value:function(){var e=this.props,t=e.Component,n=e.defaultValue,a=e.disabled,s=e.onBlur,r=e.value,o=Object(i.a)(e,["Component","defaultValue","disabled","onBlur","value"]),l=this.state.value,d=Object.assign({},o);Object.keys(this.constructor.propTypes).forEach((function(e){delete d[e]}));var u="";return"undefined"!==typeof r&&null!==r?u=r:l?u=l:n&&(u=n),Object(R.jsxs)("span",{children:[Object(R.jsx)(t,Object(c.a)({disabled:a,onBlur:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:this.refInput,value:u},d)),this.renderAutocompleteList()]})}}]),n}(s.a.Component);oe.defaultProps={Component:"textarea",defaultValue:"",disabled:!1,maxOptions:6,onBlur:function(){},onChange:function(){},onKeyDown:function(){},onRequestOptions:function(){},onSelect:function(){},options:[],fullOptions:[],regex:"^[A-Za-z0-9\\-_]+$",matchAny:!1,minChars:0,requestOnlyIfNoOptions:!0,spaceRemovers:[",",".","!","?"],spacer:" ",trigger:"@",offsetX:0,offsetY:0,value:null,passThroughEnter:!1};var ce=oe,ie=function(e){var t=e.models,n=e.conditions,r=e.editCondition,o=e.openContextMenu,c=e.contextMenuOpen,i=Object(a.useState)({x:null,y:null,display:!1}),l=Object(m.a)(i,2),d=l[0],u=l[1],h=Object(a.useState)({show:!1,conditionToEdit:null}),j=Object(m.a)(h,2),b=j[0],p=j[1],x=Object(W.a)();x.register,x.handleSubmit;if(!1===c&&!0===d.display&&u({x:null,y:null,display:!1}),0===t.length)return null;return Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{className:"text-center",children:"Conditions"}),Object(R.jsxs)("div",{children:[function(e,t,n){if(0===e.length)return null;for(var a=function(e){"click"===e.type?(u({x:null,y:null,display:!1}),n(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===d.display?(u({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),n(!0)):(u({x:null,y:null,display:!1}),n(!1)))},s=function(e,t,n){return Object(R.jsx)("tr",{className:"componentRow ",onClick:n,onContextMenu:n,children:Object(R.jsx)("td",{md:"auto",className:"fullSize",children:Object(R.jsx)("div",{className:"componentContent",children:e})})},t)},r=[],o=0;o<e.length;o++)r.push(s(e[o],o,a));return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"w-100 bg-secondary text-white text-center",children:"Add / Remove Conditions to filter results"}),Object(R.jsx)($.a,{striped:!0,bordered:!0,children:Object(R.jsx)("tbody",{children:r})})]})}(n,0,o),function(e){if(!1===e.display)return null;return Object(R.jsx)("div",{children:Object(R.jsx)(Z.a,{target:e.target,show:e.display,placement:"right-start",children:Object(R.jsx)("div",{children:Object(R.jsx)($.a,{bordered:!0,variant:"dark",children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return e.target.firstChild.data,p({show:!0,conditionToEdit:e.target.firstChild.data}),void o(!1)},children:Object(R.jsx)("div",{children:"Edit Condition"})})}),Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return t=e.target.firstChild.data,r(t,null),void o(!1);var t},children:"Delete Condition"})})]})})})})})}(d),function(e,n,a){if(!1===e.menuOpen)return null;var r=s.a.createRef();return Object(R.jsx)("div",{children:Object(R.jsxs)(Y.a,{show:e.show,onHide:n,children:[Object(R.jsx)(Y.a.Header,{closeButton:!0,children:Object(R.jsx)(Y.a.Title,{children:"Edit Join "})}),Object(R.jsxs)(Y.a.Body,{children:["Join Conditions:",Object(R.jsx)(f.a,{children:Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col",children:Object(R.jsxs)(f.a.Group,{children:[Object(R.jsx)(f.a.Label,{children:"Condition Criteria"}),Object(R.jsx)(ce,{className:"form-control",rows:3,ref:r,options:function(){for(var e=[],n=0;n<t.response.models.length;n++)for(var a=0;a<t.response.models[n].columns.length;a++)e.push(t.response.models[n].columns[a]),e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]);return e}(),fullOptions:function(){for(var e=[],n=0;n<t.response.models.length;n++)for(var a=0;a<t.response.models[n].columns.length;a++)e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]),e.push(t.response.models[n].name+"."+t.response.models[n].columns[a]);return e}(),trigger:"",defaultValue:e.conditionToEdit})]})})})})]}),Object(R.jsxs)(Y.a.Footer,{children:[Object(R.jsx)(O.a,{variant:"secondary",onClick:n,children:"Close"}),Object(R.jsx)(O.a,{variant:"primary",onClick:function(){a(e.conditionToEdit,r.current.recentValue),n()},children:"Save Changes"})]})]})})}(b,(function(){return p({show:!1,conditionToEdit:null})}),r)]}),Object(R.jsx)("div",{className:"pt-2 text-center",children:Object(R.jsx)(O.a,{variant:"primary",onClick:function(){return p({show:!0,conditionToEdit:null})},children:"Add Condition"})})]})};function le(e){var t=e.models,n=e.openContextMenu,s=e.contextMenuOpen,r=e.selects,o=e.editSelect,i=e.highlightColumn,l=e.outputModel,d=(e.editOutputModel,Object(a.useState)({x:null,y:null,display:!1})),u=Object(m.a)(d,2),h=u[0],j=u[1],b=Object(a.useState)(-1),p=Object(m.a)(b,2),O=p[0],x=p[1],g=Object(a.useState)(-1),v=Object(m.a)(g,2),y=v[0],C=v[1];if(0===t.length)return null;!1===s&&!0===h.display&&j({x:null,y:null,display:!1});return Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{className:"text-center",children:"Output"}),Object(R.jsx)("div",{className:"w-100 bg-secondary text-white text-center",children:l.name}),Object(R.jsx)("div",{className:"w-100 bg-light text-dark text-center font-italic mb-3",children:l.description?l.description:"New Model"}),Object(R.jsx)("table",{className:"table table-striped table-hover w-100",children:Object(R.jsx)("tbody",{children:function(e,t,n,a){for(var s=function(e){"click"===e.type?(j({x:null,y:null,display:!1}),a(!1)):"contextmenu"===e.type&&(e.preventDefault(),!1===h.display?(j({x:e.pageX,y:e.pageY,display:!0,clickTargetType:"Condition",target:e.target}),a(!0)):(j({x:null,y:null,display:!1}),a(!1)))},r=function(e){e.preventDefault(),x(-1),o(t[O],Object(c.a)(Object(c.a)({},t[O]),{},{alias:e.target.value}))},i=function(e){e.preventDefault(),C(-1),o(t[y],Object(c.a)(Object(c.a)({},t[y]),{},{description:e.target.value}))},l=function(e,t){return O===t?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(f.a,{onSubmit:function(e){return e.preventDefault()},children:Object(R.jsx)(f.a.Group,{children:Object(R.jsx)(f.a.Control,{type:"text",defaultValue:null!==e[t].alias&&void 0!==e[t].alias?e[t].alias:e[t].column,onBlur:function(e){return r(e)},placeholder:"Add name for output field",autoFocus:!0})})})}):Object(R.jsx)(R.Fragment,{children:Object(R.jsx)("div",{className:"w-100 text-dark text-right","data-selectindex":t,children:null!==e[t].alias&&void 0!==e[t].alias?e[t].alias:e[t].column})})},d=function(e,t){return y===t?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(f.a,{onSubmit:function(e){return e.preventDefault()},children:Object(R.jsx)(f.a.Group,{children:Object(R.jsx)(f.a.Control,{type:"text",defaultValue:null!==e[t].description&&void 0!==e[t].description?e[t].description:null,onBlur:function(e){return i(e)},placeholder:"Add description for output field",autoFocus:!0})})})}):null!==e[t].description&&void 0!==e[t].description?Object(R.jsx)(R.Fragment,{children:Object(R.jsx)("div",{className:"w-100 text-dark text-right font-italic","data-selectindex":t,children:e[t].description})}):null},u=function(e){var t=[];if(void 0!==e&null!==e)for(var a=0;a<e.inputColumns.length;a++)t.push(e.inputColumns[a]);n(t)},b=[],p=function(e){b.push(Object(R.jsx)("tr",{onMouseEnter:function(){return u(t[e])},onMouseLeave:function(){return u()},onClick:function(e){return s(e)},onContextMenu:function(e){return s(e)},children:Object(R.jsxs)("td",{"data-selectindex":e,children:[l(t,e),d(t,e)]})},e))},m=0;m<t.length;m++)p(m);return b}(0,r,i,n)})}),function(e,t){if(!1===e.display)return null;return Object(R.jsx)("div",{children:Object(R.jsx)(Z.a,{target:e.target,show:e.display,placement:"left-start",children:Object(R.jsx)("div",{children:Object(R.jsx)($.a,{bordered:!0,variant:"dark",children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return t=e.target.dataset.selectindex,x(parseInt(t)),void n(!1);var t},children:Object(R.jsx)("div",{children:"Edit Name"})})}),Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return t=e.target.dataset.selectindex,C(parseInt(t)),void n(!1);var t},children:Object(R.jsx)("div",{children:"Edit Description"})})}),Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return a=t[e.target.dataset.selectindex],o(a,null),void n(!1);var a},children:"Delete Field"})})]})})})})})}(h,r)]})}function de(){return(de=Object(C.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/model_old/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(e){if(0===e.length)return null;for(var t=e[0].fullName,n=1;n<e.length;n++)t+="\n  AND "+e[n].fullName;return t},he=function(e){var t="SELECT\n",n=function(e){return function(e){return"definition"in e?e.definition:e.inputColumns[0].model+"."+e.inputColumns[0].column}(e)+" AS "+e.alias};if(0!==e.selects.length){t+="  "+n(e.selects[0])+"\n";for(var a=1;a<e.selects.length;a++)t+="  , "+n(e.selects[a])+"\n"}else t+="  *\n";return t},je=function(e){var t="",n=function(e){return'{{ ref("'+e.name+'") }} AS '+e.name};if(0!==e.models.length){t+="FROM "+n(e.models.response.models[0])+"\n";for(var a=1;a<e.models.response.models.length;a++)t+="LEFT JOIN "+n(e.models.response.models[a])+"\n  ON "+ue(e.models.response.models[a].joinConditions)+"\n"}else t+="FROM "+e.outputModel;return t},be=function(e){var t="";if(0!==e.models.length){t+="WHERE "+e.conditions[0]+"\n";for(var n=1;n<e.conditions.length;n++)t+="  AND "+e.conditions[n]+"\n"}else t+="FROM "+e.outputModel;return t},pe=function(e){var t=e.state;return Object(R.jsxs)("div",{children:["Generated SQL:",Object(R.jsxs)("div",{className:"sqlContent",children:[he(t),je(t),be(t)]})]})},me=(a.Component,n(667)),fe=function(e){e.addModel;var t=e.hostVersion,n=e.logState,s=(e.openSQLPanel,e.openModelBuilder,e.openCatalog,e.openConfig,e.appState,e.contextMenuOpen,e.openContextMenu,e.selectModel,e.user),r=e.setUser,o=e.userConfig,c=e.setUserConfig,i=Object(j.g)(),l=Object(a.useRef)(null);var d,u=function(e){return 0===e.target.value.trim().length||function(){var e;clearTimeout(e),e=setTimeout((function(){i.push("/catalog/search/"+l.current.value)}),500)}(),null},h=function(){fetch("/api/v1/users/logout",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+s.token}}),r({user:{}}),sessionStorage.removeItem("user"),c({}),sessionStorage.removeItem("userconfig")};return Object(R.jsxs)(me.a,{className:"navbar-dark bg-brand position-fixed w-100 z-100",expand:"lg",children:[Object(R.jsx)(me.a.Brand,{href:"/",children:"T\u0100NGATA"}),Object(R.jsx)(me.a.Toggle,{"aria-controls":"navbarContent"}),Object(R.jsxs)(me.a.Collapse,{id:"navbarContent",className:"justify-content-between",children:[Object(R.jsxs)("div",{className:"navbar-nav p-2 bg-brand",children:[Object(R.jsx)("div",{className:"nav-item nav-link bg-brand "+(i.location.pathname.includes("/catalog")?"active":null),role:"button",onClick:function(){return i.push("/catalog")},children:"Catalog"}),Object(R.jsx)("div",{className:"nav-item nav-link bg-brand "+(i.location.pathname.includes("/config")?"active":null),role:"button",onClick:function(){return i.push("/config")},children:"Config"})]}),Object(R.jsx)("div",{className:"navbar-nav p2",children:Object(R.jsx)("form",{className:"form-inline",children:Object(R.jsx)("input",{className:"form-control mr-sm-2",type:"search",ref:l,onFocus:function(){i.push("/catalog/search/"+l.current.value)},onChange:function(e){return u(e)},placeholder:"Search Models","aria-label":"Search Models"})})}),Object(R.jsxs)("div",{className:"navbar-nav p-2",children:[Object(R.jsx)("div",{className:"nav-item nav-link mr-sm-2"+("UploadMetadata"!==o.dbtmethod?null:" d-none"),role:"button",onClick:function(){fetch("/api/v1/reload_dbt",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+s.token}})},children:"Refresh dbt_ catalog"}),function(e,t){return"node"===e?Object(R.jsx)("div",{className:"nav-item nav-link mr-sm-2",role:"button",onClick:function(){return t()},children:"Submit changes"}):null}(t,(function(){var e={prTitle:prompt("Please describe your changes:","Added descriptions to models x, y")};fetch("/api/v1/create_pr",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+s.token},body:JSON.stringify(e)})})),(d="production","development"===d?Object(R.jsx)("div",{className:"nav-item nav-link",role:"button",onClick:function(){return n()},children:"Show state in console "}):null),function(e,t){return"node"===e?Object(R.jsxs)("div",{className:"nav-item nav-link mr-sm-2",role:"button",onClick:function(){return h()},children:["Logout ",t.firstname]}):null}(t,o)]})]})]})},Oe=n(14),xe=n(668),ge=n(669),ve=n(65),ye=(n(463),n(114)),Ce=(n(464),n(95)),Se=n(202),we=n.n(Se),ke=new we.a.graphlib.Graph;ke.setDefaultEdgeLabel((function(){return{}}));var Ne=200,_e=function(e){var t=Object(j.g)(),n=Object(a.useState)({x:null,y:null,display:!1}),s=Object(m.a)(n,2),r=s[0],o=s[1],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LR";return ke.setGraph({rankdir:t}),e.forEach((function(e){Object(Ce.d)(e)?ke.setNode(e.id,{width:Ne,height:33}):ke.setEdge(e.source,e.target)})),we.a.layout(ke),e.map((function(e){if(Object(Ce.d)(e)){var t=ke.node(e.id);e.targetPosition="left",e.sourcePosition="right",e.position={x:t.x-100+Math.random()/1e3,y:t.y-16.5}}return e}))}(e.lineageArray.lineage),i=Object(a.useState)(c),l=Object(m.a)(i,2),d=l[0],u=(l[1],function(){return Object(R.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0,0,0,0.2)",zIndex:1500},onClick:function(){return o({x:null,y:null,display:!1})},onContextMenu:function(){return o({x:null,y:null,display:!1})}})});return Object(R.jsxs)("div",{className:"layoutflow lineagebox",children:[Object(R.jsx)(Ce.b,{children:Object(R.jsx)(Ce.c,{elements:d,connectionLineType:"smoothstep",onLoad:function(e){e.fitView({padding:.1,includeHiddenNodes:!0})},onNodeContextMenu:function(e,t){e.preventDefault(),o({x:e.pageX,y:e.pageY,display:!0,target:e.target,nodeID:t.id})},minZoom:"0.1",children:Object(R.jsx)(Ce.a,{})})}),function(e){return!1===e.display?null:Object(R.jsxs)("div",{children:[Object(R.jsx)(Z.a,{target:e.target,show:e.display,placement:"right-start",children:Object(R.jsx)("div",{style:{zIndex:1051},children:Object(R.jsx)($.a,{bordered:!0,variant:"dark",children:Object(R.jsxs)("tbody",{children:[Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return t.push("/catalog/"+e.nodeID)},children:"Open Model in Current Tab"})}),Object(R.jsx)("tr",{children:Object(R.jsx)("td",{onClick:function(){return window.open("/catalog/"+e.nodeID)},children:"Open Model in New Tab"})})]})})})}),Object(R.jsx)(u,{show:e.display})]})}(r)]})},Me=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.searchResults;e.results.length>0&&(e.results=e.results.sort((function(e,t){return Math.min(0,t.promoteStatus)-Math.min(0,e.promoteStatus)})));var t=this.props.resultSelectFunction,n=function(){if(0===e.results.length)return Object(R.jsx)("div",{className:"container searchbox z-200",children:Object(R.jsx)(V.a,{children:Object(R.jsx)(G.a,{children:Object(R.jsx)("h5",{className:"text-center",children:"No search results"})})})});var n=e.results.map((function(e,n){return function(e,n){return console.log(e),Object(R.jsx)("div",{className:"row"+(1===e.promoteStatus?" promote":-1===e.promoteStatus?" demote":""),children:Object(R.jsx)("div",{className:"col-sm",children:Object(R.jsxs)("div",{className:"container",onClick:function(e){return t(e,n)},children:[Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{className:"col font-weight-bold",children:[e.modelName.toLowerCase()," ",1===e.promoteStatus?Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",class:"bi bi-patch-check",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{"fill-rule":"evenodd",d:"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),Object(R.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"})]}):-1===e.promoteStatus?Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",class:"bi bi-patch-exclamation",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{d:"M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.553.553 0 0 1-1.1 0L7.1 4.995z"}),Object(R.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"})]}):""]}),Object(R.jsx)("div",{className:"col font-weight-light font-italic text-right",children:e.nodeID.toLowerCase()})]}),Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col font-italic",children:e.modelDescription})}),"column_name"===e.type||"column_description"===e.type?Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{className:"col",children:["Column: ",e.columnName]}),Object(R.jsx)("div",{className:"col",children:e.columnDescription})]}):null,"tag_name"===e.type?Object(R.jsx)("div",{className:"row",children:Object(R.jsxs)("div",{className:"col",children:["Tag: ",e.tagName]})}):null]})})},"searchRow"+n)}(e,n)}));return Object(R.jsxs)("div",{className:"container searchbox z-200",children:[Object(R.jsx)(V.a,{children:Object(R.jsx)(G.a,{children:Object(R.jsxs)("h5",{className:"text-center",children:[e.results.length," search results:"]})})}),n]})};return Object(R.jsx)("div",{children:Object(R.jsx)(n,{})})}}]),n}(a.Component);function Te(e,t){return Le.apply(this,arguments)}function Le(){return(Le=Object(C.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/model_search/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return De.apply(this,arguments)}function De(){return(De=Object(C.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/models/"+t,{headers:{Authorization:"Token "+n.token}});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(l.a)(this,n),(s=t.call(this,e)).selectColumn=function(e){s.props.selectModelColumn(s.state.selectedModel.modelName,e)},s.clearColumns=function(){s.setState({refColumns:{}})},s.CatalogColumns=function(){return Object.keys(s.state.refColumns).length>0?Object(R.jsx)("div",{className:"row mt-md-3",children:Object(R.jsxs)("div",{className:"col",children:["Choose Column:",Object(R.jsxs)("table",{className:"table table-sm",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:"Name"}),Object(R.jsx)("th",{children:"Type"}),Object(R.jsx)("th",{children:"Description"}),Object(R.jsx)("th",{children:"Tests"})]})}),Object(R.jsx)("tbody",{children:Object.entries(s.state.refColumns).map((function(e,t){return Object(R.jsxs)("tr",{onClick:function(){return s.selectColumn(e[0])},children:[Object(R.jsx)("td",{className:"catalogColumnName",children:e[0].toLowerCase().replaceAll("_","_\u200b")}),Object(R.jsx)("td",{className:"catalogColumnType",children:e[1].type.toLowerCase()}),Object(R.jsx)("td",{children:Object(R.jsx)("div",{children:e[1].description})})]},"columnRow"+e[0])}))})]})]})}):Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col col-md-auto",children:"This model does not appear to contain any columns."})})},s.state={refSearchResults:{},refColumns:{},selectedModel:{}},s.refSearchBox=Object(a.createRef)(),s}return Object(d.a)(n,[{key:"debounceRefSearchResults",value:function(e){var t,n=this;clearTimeout(t),t=setTimeout((function(){Te(n.refSearchBox.current.value,n.props.user).then((function(e){if(0===e.length||e.error)return null;n.setState({refSearchResults:{searchResults:e}})}))}),1e3)}},{key:"render",value:function(){var e=this;if(0===Object.keys(this.state.refColumns).length&&this.state.refSearchResults&&this.state.refSearchResults.searchResults&&this.state.refSearchResults.searchResults.results&&this.state.refSearchResults.searchResults.results.length>0){return Object(R.jsxs)("div",{children:[Object(R.jsx)("input",{className:"form-control mr-sm-2",type:"search",ref:this.refSearchBox,onFocus:function(){return e.clearColumns()},onChange:function(t){return e.debounceRefSearchResults(t)},placeholder:"Search Models","aria-label":"Search Models"}),Object(R.jsx)(Me,{searchResults:this.state.refSearchResults.searchResults,resultSelectFunction:function(t,n){Re(e.state.refSearchResults.searchResults.results[n].nodeID,e.props.user).then((function(t){t.error||e.setState({refColumns:t.columns,selectedModel:e.state.refSearchResults.searchResults.results[n]})}))}})]})}return Object.keys(this.state.refColumns).length>0?Object(R.jsxs)("div",{children:[Object(R.jsx)("input",{className:"form-control mr-sm-2",type:"search",ref:this.refSearchBox,onFocus:function(){return e.clearColumns()},onChange:function(t){return e.debounceRefSearchResults(t)},placeholder:"Search Models","aria-label":"Search Models"}),Object(R.jsx)(this.CatalogColumns,{})]}):Object(R.jsx)("div",{children:Object(R.jsx)("input",{className:"form-control mr-sm-2",type:"search",ref:this.refSearchBox,onFocus:function(){return e.clearColumns()},onChange:function(t){return e.debounceRefSearchResults(t)},placeholder:"Search Models","aria-label":"Search Models"})})}}]),n}(a.Component);function Fe(){return(Fe=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/model_tree",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/db_tree",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze=n(159),Ue=n.n(ze),Be=n(203),Ke=(n(642),n(10)),He=n(309),Ee=n(160),Ve=n.n(Ee);function Ge(e){var t=Object(j.g)(),n=Object(a.useState)({}),s=Object(m.a)(n,2),r=s[0],o=s[1],i=Object(a.useState)(),l=Object(m.a)(i,2),d=l[0],u=l[1],h=Object(a.useState)(),b=Object(m.a)(h,2),p=(b[0],b[1]),f=Object(a.useState)(),v=Object(m.a)(f,2),y=v[0],C=v[1],S=Object(a.useState)(),w=Object(m.a)(S,2),k=w[0],N=w[1],_=Object(a.useState)(),M=Object(m.a)(_,2),T=(M[0],M[1],Object(j.i)("/catalog/search/:searchQuery"),Object(a.useState)("databases")),L=Object(m.a)(T,2),D=L[0],A=L[1],F=Object(a.useState)(),P=Object(m.a)(F,2),I=P[0],z=P[1],U=Object(a.useState)(),B=Object(m.a)(U,2),K=B[0],q=B[1],Q=Object(a.useRef)(),W=Object(a.useRef)(),X=Object(j.i)(),Z=X.path,$=(X.url,Object(ve.c)().show);function ee(){var t=function(){N(null)};return Object(R.jsxs)(Y.a,{show:k,onHide:t,children:[Object(R.jsx)(Y.a.Header,{closeButton:!0,children:Object(R.jsx)(Y.a.Title,{children:"Reference Test Setup"})}),Object(R.jsxs)(Y.a.Body,{children:["Model to reference:",Object(R.jsx)(Ae,{user:e.user,selectModelColumn:function(e,n){var a=[],s={type:"relationships",severity:"ERROR",related_model:e,related_field:n};for(var i in a.push({relationships:{to:"ref('"+e+"')",field:n,severity:"ERROR"}}),o(Object(c.a)(Object(c.a)({},r),{},{columns:Object(c.a)(Object(c.a)({},r.columns),{},Object(Oe.a)({},k.column.name,Object(c.a)(Object(c.a)({},r.columns[k.column.name]),{},{tests:[].concat(Object(H.a)(r.columns[k.column.name].tests),[s])})))})),r.columns[k.column.name].tests){var l;if("relationships"===r.columns[k.column.name].tests[i].type)a.push((l={},Object(Oe.a)(l,r.columns[k.column.name].tests[i].type,{to:"ref('"+r.columns[k.column.name].tests[i].related_model+"')",field:r.columns[k.column.name].tests[i].related_field}),Object(Oe.a)(l,"severity",r.columns[k.column.name].tests[i].severity.toUpperCase()),l));else a.push(Object(Oe.a)({},r.columns[k.column.name].tests[i].type,{severity:r.columns[k.column.name].tests[i].severity.toUpperCase()}))}ie({column:k.column.name,tests:a,target:{dataset:{metadatafield:"ColumnTest"}}}),t()}})]})]})}function te(){return Object.keys(r.columns).length>0?Object(R.jsx)("div",{className:"row mt-md-3",children:Object(R.jsx)("div",{className:"col",children:Object(R.jsxs)("table",{className:"table table-sm",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{children:"Name"}),Object(R.jsx)("th",{children:"Type"}),Object(R.jsx)("th",{children:"Description"}),Object(R.jsx)("th",{children:"Tests"})]})}),Object(R.jsx)("tbody",{children:Object.entries(r.columns).map((function(e,t){var n=[{value:"not_null",label:"Not Null",column:e[1].name,color:"#FF0000"},{value:"unique",label:"Unique",column:e[1].name,color:"#FF0000"},{value:Date.now(),label:"Relationship",column:e[1].name,color:"#FF0000"}],a={control:function(e){return Object(c.a)(Object(c.a)({},e),{},{backgroundColor:"white"})},option:function(e,t){var n=t.data,a=t.isDisabled,s=t.isFocused,r=t.isSelected,o=Ve()(n.color);return Object(c.a)(Object(c.a)({},e),{},{backgroundColor:a?null:r?n.color:s?o.alpha(.1).css():null,color:a?"#ccc":r?Ve.a.contrast(o,"white")>2?"white":"black":n.color,cursor:a?"not-allowed":"default",":active":Object(c.a)(Object(c.a)({},e[":active"]),{},{backgroundColor:!a&&(r?n.color:o.alpha(.3).css())})})},multiValue:function(e,t){var n=t.data,a=Ve()(n.color);return Object(c.a)(Object(c.a)({},e),{},{backgroundColor:a.alpha(.1).css()})},multiValueLabel:function(e,t){var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{color:n.color})},multiValueRemove:function(e,t){var n=t.data;return Object(c.a)(Object(c.a)({},e),{},{color:n.color,":hover":{backgroundColor:n.color,color:"white"}})}};function s(e){var t=e.event,n=e.props,a=(e.data,e.triggerEvent,[]),s=r.columns[n.column].tests.findIndex((function(e){return"relationship"===n.testType.toLowerCase()?e.related_model+"."+e.related_field===n.relatedField:e.type===n.testType.toLowerCase().replace(" ","_")})),i=Object.assign({},r.columns[n.column].tests[s]);if(i.severity=t.target.innerText.toUpperCase(),"relationship"===n.testType.toLowerCase())var l=r.columns[n.column].tests.filter((function(e){return e.related_model+"."+e.related_field!==n.relatedField}));else l=r.columns[n.column].tests.filter((function(e){return e.type!==n.testType.toLowerCase().replace(" ","_")}));for(var d in l.push(i),o(Object(c.a)(Object(c.a)({},r),{},{columns:Object(c.a)(Object(c.a)({},r.columns),{},Object(Oe.a)({},n.column,Object(c.a)(Object(c.a)({},r.columns[n.column]),{},{tests:l})))})),l)"relationships"===l[d].type?a.push(Object(Oe.a)({},l[d].type,{to:"ref('"+l[d].related_model+"')",field:l[d].related_field,severity:l[d].severity.toUpperCase()})):a.push(Object(Oe.a)({},l[d].type,{severity:l[d].severity.toUpperCase()}));ie({column:n.column,tests:a,target:{dataset:{metadatafield:"ColumnTest"}}})}return Object(R.jsxs)("tr",{children:[Object(R.jsx)("td",{className:"catalogColumnName",children:e[0].toLowerCase().replaceAll("_","_\u200b")}),Object(R.jsx)("td",{className:"catalogColumnType",children:e[1].type.toLowerCase()}),Object(R.jsx)("td",{children:Object(R.jsx)(Ue.a,{html:e[1].description,onBlur:ie,"data-metadatafield":"ColumnDescription",className:"catalogColumnDescription","data-columnName":e[0].toLowerCase(),placeholder:"Add a description"})}),Object(R.jsx)("td",{style:{width:"230px"},children:Object(R.jsx)(He.a,{options:n,value:function(t){var n=[];for(var a in t){var s="#000000",r="",o="";"ERROR"===e[1].tests[a].severity?s="#FF0000":"WARNING"===e[1].tests[a].severity&&(s="#0000FF"),"relationships"===e[1].tests[a].type?(r="relationships",o=Object(R.jsx)("span",{title:e[1].tests[a].related_model+"."+e[1].tests[a].related_field,children:"Relationship"})):"not_null"===e[1].tests[a].type?(r="not_null",o="Not Null"):"unique"===e[1].tests[a].type&&(r="unique",o="Unique"),n.push({value:r,label:o,color:s})}return n}(r.columns[e[0]].tests),isMulti:!0,onChange:function(t,n){var a=[];if("select-option"===n.action){var s={};for(var i in"unique"===n.option.value||"not_null"===n.option.value?(s={type:n.option.value,severity:"ERROR"},a.push(Object(Oe.a)({},n.option.value,{severity:"ERROR"})),o(Object(c.a)(Object(c.a)({},r),{},{columns:Object(c.a)(Object(c.a)({},r.columns),{},Object(Oe.a)({},n.option.column,Object(c.a)(Object(c.a)({},r.columns[n.option.column]),{},{tests:[].concat(Object(H.a)(r.columns[n.option.column].tests),[s])})))}))):"Relationship"===n.option.label&&(N({column:e[1]}),o(r)),r.columns[e[0]].tests){var l;"relationships"===r.columns[e[0]].tests[i].type?a.push((l={},Object(Oe.a)(l,r.columns[e[0]].tests[i].type,{to:"ref('"+r.columns[e[0]].tests[i].related_model+"')",field:r.columns[e[0]].tests[i].related_field}),Object(Oe.a)(l,"severity",r.columns[e[0]].tests[i].severity.toUpperCase()),l)):a.push(Object(Oe.a)({},r.columns[e[0]].tests[i].type,{severity:r.columns[e[0]].tests[i].severity.toUpperCase()}))}}else if("remove-value"===n.action){if(r.columns[e[0]].tests.indexOf(n.removedValue.value),"relationships"===n.removedValue.value)var d=r.columns[e[0]].tests.filter((function(e){return e.related_model+"."+e.related_field!==n.removedValue.label.props.title}));else d=r.columns[e[0]].tests.filter((function(e){return e.type!==n.removedValue.value}));for(var i in o(Object(c.a)(Object(c.a)({},r),{},{columns:Object(c.a)(Object(c.a)({},r.columns),{},Object(Oe.a)({},e[0],Object(c.a)(Object(c.a)({},r.columns[e[0]]),{},{tests:d})))})),a=[],d)"relationships"===d[i].type?a.push(Object(Oe.a)({},d[i].type,{to:"ref('"+d[i].related_model+"')",field:d[i].related_field,severity:d[i].severity.toUpperCase()})):a.push(Object(Oe.a)({},d[i].type,{severity:d[i].severity.toUpperCase()}))}ie({column:e[0],tests:a,target:{dataset:{metadatafield:"ColumnTest"}}})},styles:a,menuPortalTarget:document.body,openMenuOnClick:!1,components:{MultiValueContainer:function(t){return Object(R.jsx)("div",{onContextMenu:function(t){return function(t){t.preventDefault(),$(t,{props:{column:e[0].toLowerCase(),testType:t.target.textContent,relatedField:t.target.title},id:"testTypeMenu"})}(t)},children:Object(R.jsx)(Ke.l.MultiValueContainer,Object(c.a)({},t))})},ClearIndicator:function(e){return null}}})}),Object(R.jsxs)(ve.b,{id:"testTypeMenu",children:[Object(R.jsx)(ve.a,{id:"setError",onClick:s,children:"Error"}),Object(R.jsx)(ve.a,{id:"setWarning",onClick:s,children:"Warning"})]})]},"columnRow"+e[0])}))})]})})}):Object(R.jsx)("div",{className:"row",children:Object(R.jsx)("div",{className:"col col-md-auto",children:"This model does not appear to contain any columns."})})}function ne(){return Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"green",class:"bi bi-patch-check",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{"fill-rule":"evenodd",d:"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}),Object(R.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"})]})}function ae(){return Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"red",class:"bi bi-patch-exclamation",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{d:"M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.553.553 0 0 1-1.1 0L7.1 4.995z"}),Object(R.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"})]})}Object(a.useEffect)((function(){(function(e){return Fe.apply(this,arguments)})(e.user).then((function(e){e.error||(u(e),z(se(e)))})),Pe(e.user).then((function(e){e.error||(p(e),q(oe(e)))}))}),[]);var se=function(e){return[re(e,"model","model")].concat([re(e,"source","source")])},re=function e(t,n,a){var s,r=[];if(s=n?t[n]:t,Object.keys(s)&&Object.keys(s)&&Object.keys(s).length>0){for(var o in s)r.push(e(s,o,a+"."+o));return{label:n,key:a,nodes:r=r.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}))}}return{label:n,key:a}},oe=function(e){return ce(e.db_models)},ce=function(e){var t,n,a=[];for(var s in e){0!==a.filter((function(t){return t.label===e[s].database})).length&&0!==a.filter((function(t){return t.label===e[s].database}))[0].length||a.push({label:e[s].database,key:e[s].database,nodes:[]});var r=a.filter((function(t){return t.key===e[s].database}))[0].nodes;r&&0!==r.length&&0!==r.filter((function(t){return t.label===e[s].schema})).length||r.push({label:e[s].schema,key:e[s].schema,nodes:[]}),r.filter((function(t){return t.key===e[s].schema}))[0].nodes.push({label:(t=e[s].name,n=e[s].promote_status,Object(R.jsxs)("div",{className:1===n?" promote":-1===n?" demote":"",children:[t," ",1===n?ne():-1===n?ae():""]})),key:e[s].nodeID})}function o(e,t){return e.label>t.label?1:e.label<t.label?-1:0}for(var c in a=a.sort((function(e,t){return o(e,t)})))for(var i in a[c].nodes=a[c].nodes.sort((function(e,t){return o(e,t)})),a[c].nodes)a[c].nodes[i].nodes=a[c].nodes[i].nodes.sort((function(e,t){return o(e,t)}));return a};function ie(t){var n={},a=[],s=[];switch(t.target.dataset.metadatafield){case"Description":n={updateMethod:"yamlModelProperty",yaml_path:r.yaml_path,model_path:r.model_path,model:r.name,node_id:r.nodeID,property_name:"description",new_value:t.target.innerText},o(Object(c.a)(Object(c.a)({},r),{},{description:t.target.innerText}));break;case"Promotion":a=Object(H.a)(r.tags),s=Object(H.a)(a),1===t.newPromotionStatus?s.push(e.serverConfig.promotion_tag):-1===t.newPromotionStatus&&s.push(e.serverConfig.demotion_tag),n={updateMethod:"yamlModelTags",yaml_path:r.yaml_path,model_path:r.model_path,model:r.name,node_id:r.nodeID,property_name:"tags",new_value:s},o(Object(c.a)(Object(c.a)({},r),{},{promote_status:t.newPromotionStatus}));break;case"Tags":if("None"===t.target.innerText){n=null;break}a=t.target.innerText.split(",").map((function(e){return e.trim()})),s=Object(H.a)(a),1===r.promote_status?s.push(e.serverConfig.promotion_tag):-1===r.promote_status&&s.push(e.serverConfig.demotion_tag),n={updateMethod:"yamlModelTags",yaml_path:r.yaml_path,model_path:r.model_path,model:r.name,node_id:r.nodeID,property_name:"tags",new_value:s},o(Object(c.a)(Object(c.a)({},r),{},{tags:a}));break;case"ColumnDescription":n={updateMethod:"yamlModelColumnProperty",yaml_path:r.yaml_path,model_path:r.model_path,model:r.name,node_id:r.nodeID,column:t.target.dataset.columnname,property_name:"description",new_value:t.target.innerText},o(Object(c.a)(Object(c.a)({},r),{},{columns:Object(c.a)(Object(c.a)({},r.columns),{},Object(Oe.a)({},t.target.dataset.columnname,Object(c.a)(Object(c.a)({},r.columns[t.target.dataset.columnname]),{},{description:t.target.innerText})))}));break;case"ColumnTest":n={updateMethod:"yamlModelColumnTest",yaml_path:r.yaml_path,model_path:r.model_path,model:r.name,node_id:r.nodeID,column:t.column,new_value:t.tests}}n&&fetch("/api/v1/update_metadata",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token "+e.user.token},body:JSON.stringify(n)})}function le(e,t){function n(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),s=n[0],o=n[1],c=function(){return o(!1)};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(O.a,{className:"tealButton",onClick:function(){return o(!0)},children:"Show Lineage"}),Object(R.jsxs)(Y.a,{show:s,onHide:c,size:"xl",children:[Object(R.jsx)(Y.a.Header,{closeButton:!0,children:Object(R.jsx)(Y.a.Title,{children:r.name})}),Object(R.jsx)(Y.a.Body,{className:"lineagebox",children:Object(R.jsx)(_e,{className:"lineagebox",lineageArray:e})}),Object(R.jsx)(Y.a.Footer,{children:Object(R.jsx)(O.a,{variant:"secondary",onClick:c,children:"Close"})})]})]})}return Object(R.jsx)(n,{lineage:e})}function de(){if("node"===r.model_type&&r.created_by)return Object(R.jsx)("div",{className:"row mt-md-3",children:Object(R.jsxs)("div",{className:"col col-md-auto",children:["Created: ",r.created_by+(r.created_relative_date?", "+r.created_relative_date:null)]})})}function ue(e){if(e){var t="",n=e.split(".");for(var a in n)t+=e.substring(0,e.indexOf(n[a])+n[a].length)+"/";return t.slice(0,-1)}return null}function he(){var n=Object(j.h)().searchQuery;if(y&&y.searchString===n){return Object(R.jsx)(Me,{searchResults:y,resultSelectFunction:function(e,n){t.push("/catalog/"+y.results[n].nodeID)}})}return Te(n,e.user).then((function(e){if(0===e.length||e.error)return C([]),null;e.searchString===window.location.href.split("/").pop()&&C(e)})),Object(R.jsx)("div",{children:"Loading Search Results..."})}function je(){var n=Object(j.h)().catalogPage;if(0===Object.keys(r).length||r.nodeID!==n)return Re(n,e.user).then((function(e){e.error||(o(e),d&&z(se(d)))})),Pe(e.user).then((function(e){e.error||(p(e),q(oe(e)))})),Object(R.jsx)("div",{children:"No Model Found"});function a(e){var t=e.event,n=(e.props,e.data,e.triggerEvent,0);"Promote"===t.target.innerText?n=1:"Demote"===t.target.innerText&&(n=-1),ie({newPromotionStatus:n,target:{dataset:{metadatafield:"Promotion"}}})}var s=r.tags.length>0?r.tags.join(", "):null;return Object(R.jsxs)(E.a,{className:"catalogContainer display-block",children:[Object(R.jsxs)("div",{className:"row justify-content-md-left",children:[Object(R.jsx)("div",{className:"col col-md-auto pr-md-3",children:Object(R.jsxs)("h3",{className:"mb-md-0",children:[r.name.toLowerCase()," ",Object(R.jsx)("div",{className:"catalog_title_promotion",onContextMenu:function(e){return function(e){e.preventDefault(),$(e,{props:{},id:"promotionMenu"})}(e)},children:1===r.promote_status?ne():-1===r.promote_status?ae():Object(R.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"blue",class:"bi bi-patch-minus",viewBox:"0 0 16 16",children:[Object(R.jsx)("path",{"fill-rule":"evenodd",d:"M5.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z"}),Object(R.jsx)("path",{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"})]})})]})}),Object(R.jsx)("div",{className:"col font-italic align-self-end pl-md-0",children:r.materialization}),Object(R.jsxs)("div",{className:"col align-self-end pl-md-0 text-right",children:["tags: ",Object(R.jsx)("i",{children:Object(R.jsx)(Ue.a,{innerRef:s,html:s,onBlur:ie,"data-metadatafield":"Tags",placeholder:"Add comma-separated Tags",style:{display:"inline",minWidth:"100px"}})})]})]}),Object(R.jsxs)("div",{className:"row justify-content-between pt-md-1",children:[Object(R.jsxs)("div",{className:"col col-md-auto",children:[r.database.toLowerCase(),".",r.schema.toLowerCase(),".",r.name.toLowerCase()]}),Object(R.jsx)("div",{className:"col col-md-auto",children:r.row_count?Number(r.row_count).toLocaleString()+" rows":null})]}),de(),Object(R.jsx)("div",{className:"row mt-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:Object(R.jsx)(Ue.a,{innerRef:r.description,html:r.description?r.description:null,onBlur:ie,"data-metadatafield":"Description",placeholder:"Add a description"})})}),Object(R.jsx)("div",{className:"row mt-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:le(r.lineage,e.selectModel)})}),Object(R.jsxs)(xe.a,{className:"mt-md-3",defaultActiveKey:"0",children:[Object(R.jsxs)(ge.a,{children:[Object(R.jsx)(ge.a.Header,{children:Object(R.jsx)(xe.a.Toggle,{as:O.a,variant:"link",eventKey:"0",children:"Columns"})}),Object(R.jsx)(xe.a.Collapse,{eventKey:"0",children:Object(R.jsx)("div",{className:"container",children:te()})})]}),Object(R.jsxs)(ge.a,{children:[Object(R.jsx)(ge.a.Header,{children:Object(R.jsx)(xe.a.Toggle,{as:O.a,variant:"link",eventKey:"1",children:"SQL"})}),Object(R.jsx)(xe.a.Collapse,{eventKey:"1",children:Object(R.jsx)("div",{className:"container",children:Object(R.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:Object(R.jsxs)(x.a,{defaultActiveKey:"raw",id:"uncontrolled-tab-example",className:"ml-md-1",children:[Object(R.jsx)(g.a,{eventKey:"raw",title:"raw SQL",className:"py-md-3 catalogSQL",children:r.raw_sql}),Object(R.jsx)(g.a,{eventKey:"processed",title:"processed SQL",className:"py-md-3 catalogSQL",children:r.compiled_sql})]})})})})})]}),Object(R.jsxs)(ge.a,{children:[Object(R.jsx)(ge.a.Header,{children:Object(R.jsx)(xe.a.Toggle,{as:O.a,variant:"link",eventKey:"2",children:"Code Change History"})}),Object(R.jsx)(xe.a.Collapse,{eventKey:"2",children:Object(R.jsxs)("div",{className:"container",children:[Object(R.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:r.all_contributors.length>1?Object(R.jsx)(R.Fragment,{children:r.all_contributors.map((function(e,t){return Object(R.jsxs)("div",{title:e,children:[0===t?Object(R.jsxs)("b",{children:["Contributors:",Object(R.jsx)("br",{})]}):null,e]},"nodeContributor"+t)}))}):null})}),Object(R.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("table",{className:"table",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{scope:"col",children:"Date"}),Object(R.jsx)("th",{scope:"col",children:"Author"}),Object(R.jsx)("th",{scope:"col",children:"Commit Message"})]})}),Object(R.jsx)("tbody",{children:r.all_commits.map((function(e,t){return Object(R.jsxs)("tr",{title:e.hash,children:[Object(R.jsx)("td",{title:e.authorDate,children:e.authorDateRel}),Object(R.jsx)("td",{children:e.authorName}),Object(R.jsx)("td",{children:Object(R.jsx)("a",{href:null!==e.originURL?e.originURL:null,target:"_blank",children:e.subject})})]},"catalogFileCommit "+t)}))})]})})})})]})})]}),Object(R.jsxs)(ge.a,{children:[Object(R.jsx)(ge.a.Header,{children:Object(R.jsx)(xe.a.Toggle,{as:O.a,variant:"link",eventKey:"3",children:"Depends On"})}),Object(R.jsx)(xe.a.Collapse,{eventKey:"3",children:Object(R.jsx)("div",{className:"container",children:Object(R.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:Object(R.jsxs)(R.Fragment,{children:[r.depends_on?r.depends_on.nodes.map((function(e,n){return Object(R.jsxs)("div",{title:e,children:[0===n?Object(R.jsxs)("b",{children:["Models:",Object(R.jsx)("br",{})]}):null,Object(R.jsx)("a",{href:"#",onClick:function(n){n.preventDefault(),t.push("/catalog/"+e)},children:e.split(".").pop()})]},"catalogDependsOnModel"+n)})):null,r.depends_on?r.depends_on.macros.map((function(e,t){return Object(R.jsxs)("div",{title:e,children:[0===t?Object(R.jsxs)("b",{children:["Macros:",Object(R.jsx)("br",{})]}):null,e.split(".").pop()]},"catalogDependsOnMacro"+t)})):null]})})})})})]}),Object(R.jsxs)(ge.a,{children:[Object(R.jsx)(ge.a.Header,{children:Object(R.jsx)(xe.a.Toggle,{as:O.a,variant:"link",eventKey:"4",children:"Dependencies"})}),Object(R.jsx)(xe.a.Collapse,{eventKey:"4",children:Object(R.jsx)("div",{className:"container",children:Object(R.jsx)("div",{className:"row mt-md-3 mb-md-3",children:Object(R.jsx)("div",{className:"col col-md-auto",children:Object(R.jsx)(R.Fragment,{children:r.referenced_by.map((function(e,n){return Object(R.jsxs)("div",{title:e,children:[0===n?Object(R.jsxs)("b",{children:["Models:",Object(R.jsx)("br",{})]}):null,Object(R.jsx)("a",{href:"#",onClick:function(n){n.preventDefault(),t.push("/catalog/"+e)},children:e.split(".").pop()})]},"catalogDependentModel"+n)}))})})})})})]})]}),Object(R.jsx)(ee,{}),Object(R.jsxs)(ve.b,{id:"promotionMenu",children:[Object(R.jsx)(ve.a,{id:"promote_model",onClick:a,children:"Promote"}),Object(R.jsx)(ve.a,{id:"remove_promotion",onClick:a,children:"Default"}),Object(R.jsx)(ve.a,{id:"demote_model",onClick:a,children:"Demote"})]})]})}return Object(R.jsx)(E.a,{fluid:!0,children:Object(R.jsxs)(V.a,{className:"flex-xl-nowrap",children:[Object(R.jsx)(G.a,{as:function(e){var n=Object(a.useState)(!1),s=Object(m.a)(n,2),o=s[0],i=s[1],l=function(e){!1===e.hasNodes?t.push("/catalog/"+e.key.split("/").pop()):(Q.current.resetOpenNodes(Q.current.state.openNodes,ue(r.nodeID)),Q.current.toggleNode(e.key),W.current.resetOpenNodes(W.current.state.openNodes,[r.database,r.database+"/"+r.schema]),W.current.toggleNode(e.key))};return Object(R.jsxs)(ye.Drawer,Object(c.a)(Object(c.a)({},e),{},{children:[Object(R.jsx)(ye.Drawer.Toggle,{onClick:function(){return i(!o)}}),Object(R.jsx)(J.a,{in:o,children:Object(R.jsx)(ye.Drawer.Overflow,{children:Object(R.jsx)(ye.Drawer.Nav,{children:Object(R.jsxs)(x.a,{activeKey:D,id:"treemenu",onSelect:function(e){return A(e)},className:"treeTabs nav nav-tabs nav-justified",children:[Object(R.jsx)(g.a,{eventKey:"folders",title:"Project View",children:Object(R.jsx)(Be.a,{data:I,initialActiveKey:ue(r.nodeID),initialOpenNodes:function(e){if(e){var t=[],n=e.split(".");for(var a in n)t.push(ue(e.substring(0,e.indexOf(n[a])+n[a].length)));return t}return null}(r.nodeID),onClickItem:l,ref:Q,hasSearch:!1})}),Object(R.jsx)(g.a,{eventKey:"databases",title:"Database View",children:Object(R.jsx)(Be.a,{data:K,initialActiveKey:r.database+"/"+r.schema+"/"+r.nodeID,initialOpenNodes:[r.database,r.database+"/"+r.schema],onClickItem:l,ref:W,hasSearch:!1})})]})})})})]}))},xs:12,md:4,lg:3}),Object(R.jsx)(G.a,{children:Object(R.jsxs)(j.d,{children:[Object(R.jsx)(j.b,{exact:!0,path:Z}),Object(R.jsx)(j.b,{path:"".concat(Z,"/search/:searchQuery"),children:Object(R.jsx)(he,{})}),Object(R.jsx)(j.b,{path:"".concat(Z,"/search/"),children:Object(R.jsx)(he,{})}),Object(R.jsx)(j.b,{path:"".concat(Z,"/:catalogPage"),children:Object(R.jsx)(je,{})})]})})]})})}function Je(){return(Je=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/get_ssh",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/generate_ssh",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/open_git_connection",{headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(C.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/check_dbt_connection",{method:"GET",headers:{Authorization:"Token "+t.token}});case 2:return n=e.sent,e.next=5,n;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var We=n(82),Xe=(n(653),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).handleAllClicks=function(e){!0===a.state.contextMenuOpen&&a.setState({contextMenuOpen:!1})},a.openContextMenu=function(e){!0===e?a.setState({contextMenuOpen:!0}):a.setState({contextMenuOpen:!1})},a.logState=function(){a.setState({logState:!0})},a.openSQLPanel=function(){a.setState({openSQLPanel:!0})},a.addModel=function(){},a.openModelBuilder=function(){a.setState({appState:"ModelBuilder"})},a.openCatalog=function(){a.setState({appState:"Catalog"})},a.openConfig=function(){a.setState({appState:"Config"})},a.setUser=function(e){a.setState({user:e.user})},a.setUserConfig=function(e){a.setState({userConfig:e})},a.setServerConfig=function(e){a.setState({serverConfig:e})},a.setSSHKey=function(){(function(e){return Je.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){a.setState({sshKey:e})}))},a.generateSSHKey=function(){(function(e){return qe.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){a.setState({sshKey:e})}))},a.openGitConnection=function(){(function(e){return Qe.apply(this,arguments)})(a.state.user).then((function(e){return e.text()})).then((function(e){return e}))},a.checkDBTConnection=function(){(function(e){return Ye.apply(this,arguments)})(a.state.user).then((function(e){!0===e.ok?We.b.success("DBT_ Connection Successful."):e.text().then((function(e){We.b.error("DBT_ Connection Failed: "+e,{autoClose:1e4})}))}))},a.toastSender=function(e,t){"error"===t?We.b.error(e):"success"===t?We.b.success(e):Object(We.b)(e)},a.clearUserMessages=function(){a.setState({userMessages:[]})},a.LoginRoute=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(R.jsx)(j.b,Object(c.a)(Object(c.a)({},n),{},{render:function(e){e.location;return"python"===a.state.hostVersion||Object.keys(a.state.user).length>0?t:Object(R.jsx)(j.a,{to:{pathname:"/login"}})}}))},a.modelBuilder=s.a.createRef();var r="",o={};return"8080"===window.location.port?(r="python",o={token:""},console.log("Getting Server Config"),T(o).then((function(e){console.log("Received Server Config"),a.setState({serverConfig:e})}))):(r="node",sessionStorage.getItem("user")&&(_(JSON.parse(sessionStorage.getItem("user")).user).then((function(e){a.setState({userConfig:e.user})})),o=JSON.parse(sessionStorage.getItem("user")).user)),document.title="T\u0101ngata",a.state={appState:"Catalog",hostVersion:r,modelBuilder:{models:[{name:"humans"},{name:"abductions"}],logState:!1,openSQLPanel:!1,addModel:{}},contextMenuOpen:!1,catalogModel:{},sshKey:"",user:o,userConfig:{},serverConfig:{},userMessages:[]},a}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){!0===this.state.logState&&(console.log("App State:"),console.log(this.state),this.setState({logState:!1})),!0===this.state.openSQLPanel&&this.setState({openSQLPanel:!1})}},{key:"render",value:function(){var e=this,t=null;return(t=Object(p.io)({auth:function(t){t({token:e.state.user})}})).on("connect",(function(){t.send("Hello!")})),t.on("toast",(function(t){e.toastSender(t.message,t.type)})),Object(R.jsx)(b.a,{children:Object(R.jsxs)("div",{id:"main",children:[Object(R.jsxs)(j.d,{children:[Object(R.jsx)(j.b,{exact:!0,path:"/",children:Object(R.jsx)(j.a,{to:"/catalog"})}),Object(R.jsx)(j.b,{path:"/login",children:Object(R.jsx)(D,{setUser:this.setUser,setUserConfig:this.setUserConfig,setServerConfig:this.setServerConfig,user:this.state.user,appState:this.state.appState})}),Object(R.jsxs)(this.LoginRoute,{path:["/catalog","/search"],children:[Object(R.jsx)(fe,{addModel:this.addModel,hostVersion:this.state.hostVersion,logState:this.logState,openSQLPanel:this.openSQLPanel,openModelBuilder:this.openModelBuilder,openCatalog:this.openCatalog,openConfig:this.openConfig,appState:this.state.appState,openContextMenu:this.openContextMenu,contextMenuOpen:this.state.contextMenuOpen,selectModel:this.selectModel,user:this.state.user,setUser:this.setUser,userConfig:this.state.userConfig,setUserConfig:this.setUserConfig}),Object(R.jsx)("div",{className:"body",children:Object(R.jsx)(Ge,{appState:this.state.appState,catalogModel:this.state.catalogModel,selectModel:this.selectModel,user:this.state.user,serverConfig:this.state.serverConfig,hostVersion:this.state.hostVersion})})]}),Object(R.jsxs)(this.LoginRoute,{path:"/config",children:[Object(R.jsx)(fe,{addModel:this.addModel,logState:this.logState,openSQLPanel:this.openSQLPanel,openModelBuilder:this.openModelBuilder,openCatalog:this.openCatalog,openConfig:this.openConfig,appState:this.state.appState,openContextMenu:this.openContextMenu,contextMenuOpen:this.state.contextMenuOpen,selectModel:this.selectModel,user:this.state.user,setUser:this.setUser,userConfig:this.state.userConfig,setUserConfig:this.setUserConfig}),Object(R.jsx)("div",{className:"body",children:Object(R.jsx)(K,{appState:this.state.appState,user:this.state.user,hostVersion:this.state.hostVersion,userConfig:this.state.userConfig,setUserConfig:this.setUserConfig,serverConfig:this.state.serverConfig,setServerConfig:this.setServerConfig,sshKey:this.state.sshKey,setSSHKey:this.setSSHKey,generateSSHKey:this.generateSSHKey,openGitConnection:this.openGitConnection,checkDBTConnection:this.checkDBTConnection,toastSender:this.toastSender})})]})]}),Object(R.jsx)(We.a,{position:"bottom-center",autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})}}]),n}(a.Component)),Ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,670)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),r(e),o(e)}))};o.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(Xe,{})}),document.getElementById("root")),Ze()}},[[654,1,2]]]);
//# sourceMappingURL=main.9cc28473.chunk.js.map